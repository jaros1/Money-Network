<!DOCTYPE html>
<!--suppress HtmlUnknownAttribute, HtmlUnknownAttribute, HtmlUnknownAttribute, HtmlUnknownAttribute, HtmlUnknownAttribute, HtmlUnknownAttribute -->
<html ng-app="MoneyNetwork">
<head>
    <title ng-bind="n.texts.appname">Money Network loading</title>
    <meta name="keywords" content="money,chat,privacy,encryption">
    <link rel="stylesheet" media="all" href="css/all.css"/>

    <!-- angularJS templates - subpages in single page site - same sequence as in main menu -->
    <script type="text/ng-template" id="about.html">

        <div class="bodyfull">

            <br>
            <p>
                Demo with complementary and alternative money. Implemented in ZeroFrame and AngularJS.
                Focus on privacy, encryption, max data on client and min unencrypted data in ZeroNet.
                <br>
                Money is the force that permeates everything in our society. MoneyNetwork is a demo about money.
                With inspiration from
                <a href="http://charleseisenstein.net/" target="_blank" rel="noopener noreferrer">Charles Eisenstein</a>,
                <a href="http://www.lietaer.com/" target="_blank" rel="noopener noreferrer">Bernard Lietaer</a>
                and others.
                <br>
                The vision here is one app with easy access to any kind of money. Use the money systems you like and not only our present money system.
                Choose your money in the same way you choose clothes, food, housing, work, boyfriend, etc.
                You vote double everytime you use your wallet. What kind of money are you using and what are you using them for.
                My hope is that humans will choose money systems that are good for our lives and our planet.
            </p>

            Summary:
            <ul style="list-style-type:disc">
                <li>Running on <a href="https://zeronet.io/" target="_blank" rel="noopener noreferrer">ZeroNet</a>.
                    Distributed network, no server, no censor and no way to shut it down.</li>
                <li>No registration. User account is created in browser client
                    (an anonymous ZeroNet user certificate is required for client communication).</li>
                <li>Contacts. Search, add, verify contacts in Money Network.</li>
                <li>Chat. End to end encrypted chat, quick dialog, images, reactions and comments.</li>
                <li>todo: Free money definition. Use existing money definitions from network or create your own type of money.</li>
                <li>API to money systems. Plugin the money systems you want to use</li>
                <li>Use money transactions for goods and services.
                    Transactions are stored encrypted in <b>todo:</b> block chains, clients or
                    on <a href="https://zeronet.io/" target="_blank" rel="noopener noreferrer">ZeroNet</a>.</li>
                <li>All data except a few exceptions is encrypted. Only little information is shared unencrypted with public.<br>
                    Encryption using either
                    <a href="https://github.com/travist/jsencrypt" target="_blank" rel="noopener noreferrer">JSEncrypt</a> (RSA)
                    or ZeroNet's
                    <a href="https://zeronet.readthedocs.io/en/latest/site_development/zeroframe_api_reference/#plugin-cryptmessage"
                       target="_blank" rel="noopener noreferrer">CryptMessage</a>
                    plugin (BitCoin).
                </li>
                <li>Max data in client. Minimum data on ZeroNet. ZeroNet is used for communication between clients.</li>
                <li>Open source on <a href="http://github.com/jaros1/Zeronet-Money-Network" target="_top"
                                      rel="noopener noreferrer">GitHub</a>.
                    Feel free to clone, download, modify and make your own website or app.
                </li>
                <li>You may want to use <a href="https://www.torproject.org/" target="_blank" rel="noopener noreferrer">TOR</a>
                    when using Money Network
                    on <a href="https://zeronet.readthedocs.io/en/latest/faq/#how-to-use-zeronet-with-tor"
                          target="_blank" rel="noopener noreferrer">ZeroNet</a>.
                    You should NOT use a public ZeroNet proxy on clearnet.</li>
                <li>
                    You may want to make a backup. See export option in Account page. Everything is lost if you clear
                    browser data or switches to an other browser client.
                </li>
                <li>
                    You may want to delete your data
                    from <a href="https://zeronet.io/" target="_blank" rel="noopener noreferrer">ZeroNet</a>
                    and browser client when finished used this demo. See delete option in Account page.
                </li>
            </ul>
            <br>

            Click to show/hide screendumps:
            <a href="" ng-click="a.show_hide('-mn-login-')">Log in page</a>,
            <a href="" ng-click="a.show_hide('-mn-account-')">Account page</a>,
            <a href="" ng-click="a.show_hide('-mn-chat')">Chat page</a>,
            <a href="" ng-click="a.show_hide('-mn-wallet-')">Wallet page</a> and
            <a href="" ng-click="a.show_hide('-w2-w2-')">Test bitcoin wallet (w2)</a>
            <table style="width: 100%">
                <tbody ng-repeat="s in a.screendumps|filter:{show:true,files:true}">
                <tr><td>&nbsp;</td></tr>
                <tr><td ng-bind="s.text"></td></tr>
                <tr>
                    <td>
                        <img ng-src="{{s.src}}" style="border:1px solid black">
                    </td>
                </tr>
                </tbody>
            </table>
            <br>

            Contact info: I am not using ZeroMail.
            Send a <a href="/moneynetwork.bit/?path=/chat2/jro@zeroid.bit" target="_top" rel="noopener noreferrer">PM ✉</a>
            , use "@jro:" in ZeroMe or create a <a href="http://github.com/jaros1/Zeronet-Money-Network" target="_top" rel="noopener noreferrer">GitHub</a> issue with question or issue.

        </div>

        <!-- end about.html -->
    </script>

    <script type="text/ng-template" id="money.html">

        <div class="bodyfull">

            <br>
            <p>
                Browse connected and shared money systems:
            </p>

            <table>

                <tbody>
                <tr>
                    <td colspan="2">
                        <img src="public/css/fonts/glyphicons-137-cogwheel.png" ng-click="m.show_hide_filers()">
                        <span ng-hide="m.show_filters" ng-bind="m.filter_summary_text()"></span>
                    </td>
                </tr>
                </tbody>
                <tbody ng-show="m.show_filters">
                <tr>
                    <td colspan="2">&nbsp;</td>
                </tr>
                <tr ng-repeat="x in m.filters">
                    <td title="Start typing. Select Avg. rating, Last online etc.">
                        <input type="text" placeholder="Start typing"
                               ng-model="x.name"
                               uib-typeahead="filter.name for filter in m.get_filter_definitions(x) | filter:$viewValue | limitTo:8"
                               typeahead-on-select="m.filter_definition_changed(x)" typeahead-editable="false"
                               class="user_info" style="width: 80px">
                    </td>
                    <td title="Enter filter value. No hearts, no months etc">
                        <input type="text" placeholder="Start typing"
                               ng-model="x.value" ng-required="x.name" ng-show="x.definition.values"
                               uib-typeahead="value for value in x.definition.values | filter:$viewValue | limitTo:8"
                               typeahead-on-select="m.filter_value_changed(x,1)" ng-change="m.filter_value_changed(x,2)" typeahead-editable="false" on-key-enter="m.insert_filter_row(x)"
                               class="user_info" style="width: 400px">
                        <input type="text" placeholder="Enter wildcard"
                               ng-model="x.value" ng-required="x.name" ng-hide="x.definition.values"
                               ng-change="m.filter_value_changed(x,3)" on-key-enter="m.insert_filter_row(x)"
                               class="user_info" style="width: 400px">
                        <img ng-click="m.delete_filter_row(x)" src="public/css/fonts/glyphicons-208-remove.png">
                    </td>
                </tr>
                </tbody>
                <tbody>
                <tr>
                    <td colspan="2">&nbsp;</td>
                </tr>
                </tbody>

                <tbody ng-repeat="w in m.wallets|filter:m.filter_wallets|orderBy:m.order_by">
                <tr>
                    <th>Wallet:</th>
                    <td style="vertical-align: top">
                        <a ng-click="m.open_wallet_url(w)" ng-bind="w.wallet_url"></a>
                        <span ng-bind="w.wallet_title"></span>
                        <button type="submit" ng-click="m.test_wallet(w)" ng-show="m.show_test_wallet(w)" title="Click to test MN-wallet integration">Test</button>
                    </td>
                </tr>
                <tr>
                    <th>Description:</th>
                    <td ng-bind="w.wallet_description" style="vertical-align: top"></td>
                </tr>
                <tr ng-show="w.ratings.no_ratings">
                    <th style="vertical-align: top">Rating:</th>
                    <td ng-click="m.show_details1(w)" title="Click to {{w.ratings.show_hide}} details">
                        <table>
                            <thead>
                            <tr>
                                <th style="width: 60px; text-align: center">Rating</th>
                                <th style="width: 80px">Hearts</th>
                                <th style="width: 60px; text-align: right">#ratings</th>
                                <th style="width: 10px"></th>
                                <th style="width: 60px; text-align: right">#reviews</th>
                                <th style="width: 10px"></th>
                                <th></th>
                            </tr>
                            <tr>
                                <td style="text-align: center">Avg. {{w.ratings.avg_rating|toFixed:2}}</td>
                                <td>
                                    <span class="average">
                                        <average-heart-rating ng-model="w.ratings.avg_rating"></average-heart-rating>
                                    </span>
                                </td>
                                <td style="text-align: right">{{w.ratings.no_ratings}}</td>
                                <td></td>
                                <td style="text-align: right">{{w.ratings.no_reviews}}</td>
                                <td></td>
                                <td>
                                    <img ng-show="w.ratings.show_hide == 'show'" src="public/css/fonts/glyphicons-368-expand.png">
                                    <img ng-show="w.ratings.show_hide == 'hide'" src="public/css/fonts/glyphicons-369-collapse.png">
                                </td>
                            </tr>
                            </thead>
                            <tbody ng-repeat="d in w.ratings.details|filter:m.filter_details|orderBy:'-rate'" ng-show="w.ratings.show_hide == 'hide'">
                            <tr ng-click="m.show_details2(d); $event.stopPropagation();" title="Click to {{d.show_hide}} details">
                                <td style="text-align: center">Rate {{d.rate}}</td>
                                <td>
                                    <span class="average">
                                        <average-heart-rating ng-model="d.rate"></average-heart-rating>
                                    </span>

                                </td>
                                <td style="text-align: right">{{d.no_ratings}}</td>
                                <td></td>
                                <td style="text-align: right">{{d.no_reviews}}</td>
                                <td></td>
                                <td>
                                    <img ng-show="d.show_hide == 'show'" src="public/css/fonts/glyphicons-368-expand.png">
                                    <img ng-show="d.show_hide == 'hide'" src="public/css/fonts/glyphicons-369-collapse.png">
                                </td>
                            </tr>
                            <tr ng-show="d.show_hide == 'hide'" ng-click="$event.stopPropagation()"  title="">
                                <td colspan="7">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th style="width: 200px">Contact</th>
                                            <th style="width: 10px"></th>
                                            <th style="width: 100px">Rated</th>
                                            <th style="width: 10px"></th>
                                            <th>Hub</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat-start="r in d.ratings|filter:m.filter_ratings">
                                            <td><contact-info contact="r.contact" title="{{m.is_logged_in() ? 'Click to chat with contact' : 'Click to see contact'}}"></contact-info></td>
                                            <td></td>
                                            <td ng-bind="r.wallets_modified|shortChatTime" title="{{r.wallets_modified|date:'short'}}"></td>
                                            <td></td>
                                            <td ng-bind="r.contact.hub"></td>
                                        </tr>
                                        <tr ng-repeat-end ng-show="r.review">
                                            <td colspan="5" ng-bind="r.review"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <th>API:</th>
                    <td style="vertical-align: top">
                        <a href="{{w.wallet.api_url}}" target="_blank" rel="noopener noreferrer" ng-bind="w.wallet.api_url"></a>
                    </td>
                </tr>
                <tr>
                    <th style="vertical-align: top">Currencies:</th>
                    <td>
                        <table>
                            <thead>
                            <tr>
                                <th>Code</th>
                                <th></th>
                                <th>Name</th>
                                <th></th>
                                <th>Url</th>
                            </tr>
                            </thead>
                            <tbody ng-repeat="c in w.wallet.currencies">
                            <tr>
                                <td ng-bind="c.code"></td>
                                <td>&nbsp;</td>
                                <td ng-bind="c.name"></td>
                                <td>&nbsp;</td>
                                <td><a href="{{c.url}}" target="_blank" rel="noopener noreferrer" ng-bind="c.url"></a></td>
                            </tr>
                            <tr>
                                <td colspan="5" ng-bind-html="'<b>Fee info:</b> ' + c.fee_info"></td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr ng-show="m.is_logged_in()">
                    <th>Share:</th>
                    <td>
                        <input type="checkbox" ng-model="w.share_wallet" ng-change="m.share_wallet_changed(w)">
                        Click to share info about this wallet with other MoneyNetwork users (wallets.json file - unencrypted)
                    </td>
                </tr>
                <tr ng-show="m.is_logged_in()">
                    <th>Rate:</th>
                    <td>
                        <input type="radio" ng-model="w.rate_wallet" value='' ng-change="m.rating_changed(w)" title="Not rated"> &nbsp;&nbsp;
                        <span title="I hate this wallet. Do not use it">
                        <input type="radio" ng-model="w.rate_wallet" value=1 ng-change="m.rating_changed(w)">1<span style="color: red">❤️️</span> &nbsp;&nbsp;
                        </span>
                        <span title="Poor wallet. Not recommented">
                        <input type="radio" ng-model="w.rate_wallet" value=2 ng-change="m.rating_changed(w)">2<span style="color: red">❤❤️️</span> &nbsp;&nbsp;
                        </span>
                        <span title="OK wallet">
                        <input type="radio" ng-model="w.rate_wallet" value=3 ng-change="m.rating_changed(w)">3<span style="color: red">❤❤❤️️</span> &nbsp;&nbsp;
                        </span>
                        <span title="Good wallet. Recommended">
                        <input type="radio" ng-model="w.rate_wallet" value=4 ng-change="m.rating_changed(w)">4<span style="color: red">❤❤❤❤️️</span> &nbsp;&nbsp;
                        </span>
                        <span title="I love this wallet. Use it">
                        <input type="radio" ng-model="w.rate_wallet" value=5 ng-change="m.rating_changed(w)">5<span style="color: red">❤❤❤❤❤️️</span> &nbsp;&nbsp;
                        </span>
                        Rating and review are <span ng-hide="w.share_wallet"><b>not</b> </span>shared with other users
                    </td>
                </tr>
                <tr ng-show="m.is_logged_in()">
                    <th style="vertical-align: top">Review:</th>
                    <td>
                        <table style="width: 100%">
                            <tbody>
                            <tr>
                                <td>
                                    <textarea class="autosize postfield new_chat_msg"
                                              placeholder="{{w.rate_wallet ? 'Enter wallet review. Press \'Save review\' when ready' : 'Rate wallet 1-5 hearts'}}" rows="1" requiredr
                                              ng-model="w.wallet_review" ng-keyup="m.handleTextAreaHeight($event)" ng-disabled="!w.rate_wallet">
                                    </textarea>
                                </td>
                                <td style="vertical-align: top">
                                    <button type="submit" ng-click="m.review_updated(w)" ng-disabled="w.wallet_review && !w.rate_wallet">
                                        <img title="Save review" src="public/css/fonts/glyphicons-207-ok.png">
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>

                <tr>
                    <td>&nbsp;</td>
                </tr>
                </tbody>
            </table>

            Money links:
            <ul style="list-style-type:disc">
                <li><a href="http://charleseisenstein.net/" target="_blank" rel="noopener noreferrer">Charles Eisenstein</a>'s
                    <a href="http://charleseisenstein.net/project/sacred-economics/" target="_blank" rel="noopener noreferrer">Sacret Economics</a></li>
                <li><a href="http://www.lietaer.com/" target="_blank" rel="noopener noreferrer">Bernard Lietaer</a>'s
                    <a href="https://www.slideshare.net/LocalMoney/bernard-lietaer-new-money-for-a-new-world-pdf-from-epub" target="_blank" rel="noopener noreferrer">New Money for a New World</a></li>
                </li>
                <li><a href="https://chomsky.info/" target="_blank" rel="noopener noreferrer">Noam Chomsky</a></li>
                <li><a href="http://robertreich.org/" target="_blank" rel="noopener noreferrer">Robert Reich</a>'s
                    <a href="http://inequalityforall.com/" target="_blank" rel="noopener noreferrer">Inequality for All</a></li>
            </ul>

        </div>

        <!-- end money.html -->
    </script>

    <script type="text/ng-template" id="network.html">
        <p ng-show="c.show_welcome_msg()">No contacts were found. Please go to "Account" page and enter/update search tags.</p>
        <div ng-hide="c.show_welcome_msg()" class="bodyfull">
            <p>Money Network contacts. Use this page to manage your Money Network contacts.</p>

            <p>
                Filter:
                <input type="button" value="All" ng-click="c.toggle_filter('all')"
                       style="color: {{c.setup.contact_filters.all}}"/>&nbsp;
                <input type="button" value="Guest" ng-click="c.toggle_filter('guest')"
                       style="color: {{c.setup.contact_filters.guest}}"/>&nbsp;
                <input type="button" value="New" ng-click="c.toggle_filter('new')"
                       style="color: {{c.setup.contact_filters.new}}"/>&nbsp;
                <input type="button" value="Unverified" ng-click="c.toggle_filter('unverified')"
                       style="color: {{c.setup.contact_filters.unverified}}"/>&nbsp;
                <input type="button" value="Verified" ng-click="c.toggle_filter('verified')"
                       style="color: {{c.setup.contact_filters.verified}}"/>&nbsp;
                <input type="button" value="Ignored" ng-click="c.toggle_filter('ignore')"
                       style="color: {{c.setup.contact_filters.ignore}}"/>&nbsp;

                Sort:
                <input type="text" placeholder="Start typing" ng-model="c.setup.contact_sort" class="user_info"
                       style="width: 140px"
                       uib-typeahead="sort for sort in c.contact_sort_options | filter:$viewValue | limitTo:8"
                       typeahead-editable="false"
                       alt="{{c.contact_sort_title}}" title="{{c.contact_sort_title}}"
                       typeahead-on-select="c.contact_sort_changed()">
            </p>
            <table>
                <thead>
                <tr>
                    <th style="text-align: center"
                        title="User id (ZeroNet or alias) and contact status (new, added, unverfied, verified and ignore). Click to User id to edit">User</th>
                    <th style="width: 10px"></th>
                    <th>Status</th>
                    <th style="width: 10px"></th>
                    <th style="text-align: center">Action</th>
                </tr>
                </thead>
                <tbody><tr><td colspan="3">&nbsp;</td></tr></tbody>
                <tbody ng-repeat="x in c.contacts|filter:c.filter_contacts|orderBy:c.contact_order_by">
                <tr style="vertical-align: top">
                    <td>
                        <contact-info contact="x" title="Click to chat with contact" chat="c.chat_contact(x)"></contact-info>
                    </td>
                    <td></td>
                    <td ng-bind="x.type"></td>
                    <td></td>
                    <td>
                        <input ng-show="x|showContactAction:'ignore'" type="button" value="Ignore"
                               ng-click="c.contact_ignore(x)" ng-disabled="!n.is_logged_in()"/>
                        <input ng-show="x|showContactAction:'unplonk'" type="button" value="Unplonk"
                               ng-click="c.contact_unplonk(x)" ng-disabled="!n.is_logged_in()"/>
                        <input ng-show="x|showContactAction:'add'" type="button" value="Add"
                               ng-click="c.contact_add(x)" ng-disabled="!n.is_logged_in()"/>
                        <input ng-show="x|showContactAction:'remove'" type="button" value="Remove"
                               ng-click="c.contact_remove(x)" ng-disabled="!n.is_logged_in()"/>
                        <input ng-show="x|showContactAction:'verify'" type="button" value="Verify"
                               ng-click="c.contact_verify(x)" ng-disabled="!n.is_logged_in()"/>
                        <input ng-show="x|showContactAction:'chat'" type="button" value="Chat"
                               ng-click="c.chat_contact(x)"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">&nbsp;</td>
                </tr>
                </tbody>
            </table>

        </div>

        <!-- end network.html -->
    </script>

    <script type="text/ng-template" id="fullReactInfo">
       <div class="dialog-content">
           <p>
               <span ng-repeat="e in c.emojis">
                   <input type="radio" ng-model="c.emoji" value="{{e.emoji}}" ng-change="c.emoji_changed()">
                   <img ng-show="e.src" ng-src="{{e.src}}" height="20" width="20" alt="{{e.emoji}}" title="{{e.title}}">
                   <span ng-hide="e.src" ng-bind="e.emoji"></span>
                   {{e.count}}
               </span>
           </p>
           <p>
               <div infinite-scroll="c.get_more_reactions()" infinite-scroll-container='".dialog-content"'>
                   <span ng-repeat="r in c.reactions|filter:c.filter_reactions|limitTo: c.infinite_scroll_limit">
                       <span class="reactcontainer">
                           <img ng-src="{{r.avatar}}" class="img-circle img-sm reactavatar">
                           <img ng-src="{{r.src}}" height="20" width="20" class="img-circle reactcornerimage">
                       </span>
                       <a ng-show="r.contact" href="" ng-bind="r.alias" ng-click="c.chat_contact(r.contact)"></a>
                       <span ng-hide="r.contact" ng-bind="r.alias"></span>
                   </span>
                </div>
           </p>
       </div>
       <!-- end fullReactInfo -->
    </script>

    <script type="text/ng-template" id="addHubs">
        Add more hubs. Get content from more MoneyNetwork hubs and help distribute MoneyNetwork content.
        User Data Hub: user data (user info and chat) used by MoneyNetwork.
        Wallet Data Hub: wallet data (wallet info and money transactions) used by MoneyNetwork wallets.<br>
        Use checkbox to add/remove hubs. Use url to see info about hub (will also add site).
        <div style="width: 100%" ng-controller="AddHubsCtrl as c">
            <div ng-repeat="h in c.all_hubs|orderBy:'hub_title'" style="float: left">
                <input type="checkbox" ng-model="h.hub_added" ng-change="c.add_remove_hub(h)" ng-disabled="h.disabled">
                <a href="" ng-click="c.open_hub_url(h)">
                    <span ng-bind="h.hub"></span>
                    <span ng-bind="h.hub_title"></span>
                    <span ng-show="h.hasOwnProperty('no_users')">
                        - <span ng-bind="h.no_users"></span> users
                    </span>
                    <span ng-show="h.hasOwnProperty('peers')">
                        - <span ng-bind="h.peers"></span> peers
                    </span>
                </a>
                &nbsp;&nbsp;&nbsp;
            </div>

            <div style="width: 100%; clear: left">
                <input type="checkbox" ng-model="c.help.bol" ng-change="c.help_changed()"> help download and help distribute all user data files (public chat)?
            <span ng-show="c.help.bol">
                Thanks. I love you <span style="color: red">❤❤❤️️</span>
            </span>
            </div>

            <div style="width: 100%" ng-show="c.show_my_user_data_hub">
                User profile:
                <input type="text" placeholder="User profile hub"
                       ng-model="c.my_user_data_hub" required
                       uib-typeahead="hub.text for hub in c.user_data_hubs | filter:$viewValue | limitTo:8"
                       typeahead-editable="false"
                       typeahead-on-select="c.my_user_data_hub_changed()"
                       class="user_info" style="width: 400px">
            </div>

        </div>


        <!-- end addHubs -->
    </script>

    <script type="text/ng-template" id="messageTree">

        <span ng-show="c.set_first_and_last_chat($first,$last,m)"></span>

        <div ng-show="(m.message.folder == 'outbox')" class="media-left">
            <img ng-src="{{c.avatar.src}}" class="img-circle img-sm" alt="Click to continue chat"
                 title="Click to continue chat" ng-click="c.chat_contact(m.contact)">
        </div>
        <div ng-if="(m.message.folder == 'outbox')" class="media-body pad-hor">

            <!-- chat2: show outgoing message -->
            <table class="speech" ng-hide="m.edit_chat_message">
                <tr>
                    <td>
                        <span ng-click="c.chat_contact(m.contact)" class="media-heading"
                              alt="Click to continue chat" title="Click to continue chat">
                            <span ng-bind-html="c.setup.alias">Me</span>
                            <img ng-src="{{m.contact|contactSrc}}" title="{{m.contact|contactSrcTitle}}">
                        </span>
                    </td>
                    <td style="text-align: right; vertical-align: top">
                        <table style="margin-right: 0; margin-left: auto;">
                            <tr><td>
                                                <span class="speech-time"
                                                      title="Message size in browser and on ZeroNet. Always 0 for public chat (optional files)"> {{m.message|formatMsgSize}}</span>
                                                <span class="speech-time" title="{{m|messageOutSentTitle}}">
                                                    <i class="fa fa-clock-o fa-fw"></i> {{m|messageShortChatTime}}</span>
                                <img src="public/css/fonts/glyphicons-31-pencil.png" href="" ng-show="c.show_edit_icon(m)" ng-click="c.edit_chat_msg(m)" title="Edit message">
                                <img src="public/css/fonts/glyphicons-208-remove.png" ng-show="c.show_remove_icon(m)"
                                      ng-click="c.edit_chat_msg(m)" title="Click to delete message">
                                <img src="public/css/fonts/glyphicons-519-option-horizontal.png" title="Add comment" ng-click="c.show_comment(m)">
                                <message-react message="m" folder="outbox" react="c.react"></message-react>
                            </td></tr>
                            <tr><td><table style="margin-right: 0; margin-left: auto;">
                                <tr>
                                    <td></td>
                                    <td ng-repeat="r in c.get_reactions(m)">
                                        <react-info-img message="m" reaction="r"></react-info-img>
                                    </td>
                                    <td><react-info-count message="m" count="c.get_reactions_count(m)"></react-info-count></td>
                                </tr>
                            </table></td></tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div ng-class="m|messageOverflowOutbox" data-seq="{{m.message.seq}}">
                            Hello <span ng-bind-html="m|formatChatMessageAlias"></span>
                            <img ng-src="{{m.contact|findContactAvatar}}" height="18" width="18"
                                 title="Click to chat" alt="Click to chat"
                                 ng-click="c.chat_contact(m.contact)" fallback-src="public/images/image_failed.gif">
                            <span ng-bind-html="m|formatChatMessage"></span>
                        </div>
                    </td>
                </tr>
                <tr ng-show="m.overflow">
                    <td colspan="2" style="text-align: center" >
                        <a href="" ng-click="c.hide_overflow(m)">Show more text</a>
                    </td>
                </tr>
                <tr ng-show="m.message.message.money_transactions">
                    <td colspan="2">
                        <table>
                            <thead>
                            <tr><td colspan="7">&nbsp;</td></tr>
                            <tr><td colspan="7">Included money transactions:</td></tr>
                            <tr>
                                <th>Action</th>
                                <th>&nbsp;</th>
                                <th>Currency</th>
                                <th>&nbsp;</th>
                                <th>Wallet</th>
                                <th>&nbsp;</th>
                                <th>Amount</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="mt in m.message.message.money_transactions" style="vertical-align: top">
                                <td ng-bind="mt.action"></td>
                                <td></td>
                                <td ng-bind="mt.name"></td>
                                <td></td>
                                <td><a href="" ng-click="c.open_wallet(mt,2)" ng-bind="mt.wallet_name"></a></td>
                                <td></td>
                                <td ng-bind="mt.amount" style="text-align: right"></td>
                            </tr>
                            </tbody>
                            <tfoot>
                            <tr><td colspan="7"></td></tr>
                            <tr><td colspan="7">My wallet status:<span ng-bind="m|myTransactionStatus"></span></td></tr>
                            <tr><td colspan="7">Contact wallet status:<span ng-bind="m|contactTransactionStatus"></span></td></tr>
                            </tfoot>
                        </table>
                    </td>
                </tr>
                <tr ng-show="c.show_image(m)">
                    <td colspan="2">
                        <img ng-src="{{m.message.message.image}}">
                    </td>
                </tr>
                <tr ng-show="m.show_comment">
                    <td colspan="2" style="width: 99%">
                                        <textarea class="autosize postfield new_chat_msg" ng-model="m.comment"
                                                  rows="1" required ng-keyup="c.handleTextAreaHeight($event)"
                                                  placeholder="Enter comment">
                                        </textarea>
                    </td>
                </tr>
                <tr ng-show="m.show_comment && m.comment_src">
                    <td colspan="2" style="width: 99%">
                        <img ng-src="{{m.comment_src}}">
                    </td>
                </tr>
                <tr ng-show="m.show_comment">
                    <td colspan="2" style="width: 99%; text-align: right">
                        <div class="image-upload">
                            <label for="{{m|commentFileInputId}}"><img src="public/css/fonts/glyphicons-12-camera.png"></label>
                            <input id="{{m|commentFileInputId}}" type="file"
                                   accept=".png, .jpg, .jpeg, .gif, .tif"
                                   custom-on-change="c.uploadImage"/>
                        </div>
                        <button type="submit" ng-click="c.create_comment(m)">Send</button>
                    </td>
                </tr>
                <tr ng-show="m.messages"><td colspan="2">&nbsp;</td></tr>
                <tr ng-show="m.messages">
                    <td colspan="2" style="width: 99%; text-align: left;background-color: white;padding-top: 15px;">
                        <div>
                            <ul ng-if="m.messages" class="list-unstyled media-block">
                                <li ng-repeat="m in m.messages|filter:c.chat_filter|orderBy:c.chat_order_by:true" class="mar-btm" ng-include="'messageTree'">
                                </li>
                            </ul>
                        </div>
                    </td>
                </tr>

            </table>

            <!-- edit outgoing message -->
            <form name="{{m|chatEditFormName}}" ng-show="m.edit_chat_message" class="css-form" novalidate>

                <table class="speech" style="width: 100%">
                    <tbody style="display: table; width: inherit;">
                    <tr>
                        <td style="white-space: nowrap;"><a href="#" class="media-heading"
                                                            ng-bind-html="c.setup.alias">Me</a></td>
                        <td style="text-align: right; vertical-align: top; width: 99%">
                            <span class="speech-time"><i class="fa fa-clock-o fa-fw"></i>Now</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="width: 99%">
                            <textarea class="autosize postfield new_chat_msg" id="{{m|chatEditTextAreaId}}"
                                      rows="1" required ng-keyup="c.handleTextAreaHeight($event)">
                            </textarea>
                        </td>
                    </tr>
                    <tr ng-show="c.show_image(m)">
                        <td colspan="2">
                            <div style="position: relative; display: inline-block;">
                                <img ng-click="c.edit_chat_message_remove_image(m)"
                                      src="public/css/fonts/glyphicons-208-remove.png"
                                      style="position: absolute; right: 0;">
                                <img id="{{m|chatEditImgId}}">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="width: 99%; text-align: right">

                            <div class="image-upload">
                                <label for="{{m|chatFileInputId}}"><img src="public/css/fonts/glyphicons-12-camera.png"></label>
                                <input id="{{m|chatFileInputId}}" type="file"
                                       accept=".png, .jpg, .jpeg, .gif, .tif"
                                       custom-on-change="c.uploadImage"/>
                            </div>

                            <button type="submit" ng-click="c.cancel_edit_chat_msg(m)">Cancel</button>
                            <button type="submit" ng-click="c.delete_edit_chat_msg(m)">Delete</button>
                            <button type="submit" ng-click="c.save_chat_msg(m)" ng-disabled="{{m|chatEditFormDisabled}}">Send</button>
                        </td>
                    </tr>

                    </tbody>
                </table>

            </form>
        </div>

        <div ng-show="(m.message.folder == 'inbox')" class="media-right">
            <img ng-src="{{m|findMessageSenderAvatar}}" class="img-circle img-sm" alt="Click to chat"
                 title="Click to chat" ng-click="c.chat_contact(m.contact)" fallback-src="public/images/image_failed.gif">
        </div>
        <div ng-if="(m.message.folder == 'inbox')" class="media-body pad-hor speech-right">

            <!-- chat2: show inbox message -->
            <table class="speech">
                <tr>
                    <td style="text-align: left">
                        <span ng-click="c.chat_contact(m.contact)" class="media-heading"
                              alt="Click to chat" title="Click to chat">
                            <span ng-bind-html="m|messageAlias"></span>
                            <img ng-src="{{m|messageSrc}}" title="{{m|messageSrcTitle}}">
                        </span>
                    </td>
                    <td style="text-align: right; vertical-align: top">
                        <table style="margin-right: 0; margin-left: auto;">
                            <tr><td>
                                <span class="speech-time" title="Message size in browser"> {{m.message|formatMsgSize}}</span>
                                                <span class="speech-time" title="{{m.message.sent_at|date:'short'}}"> <i
                                                        class="fa fa-clock-o fa-fw"></i> {{m|messageShortChatTime}}</span>
                                                <img src="public/css/fonts/glyphicons-356-bullhorn.png" ng-show="c.show_bullhorn_icon(m)"
                                                     ng-click="c.edit_chat_msg(m, true)" title="Bullhorn. Click for spam. Move contact to list of ignored contacts">
                                                <img src="public/css/fonts/glyphicons-208-remove.png" ng-show="c.show_remove_icon(m)"
                                                     ng-click="m.message.message.money_transactions_status.spinner || c.edit_chat_msg(m)" title="Click to delete message">
                                <a ng-show="c.show_verify_icon(m)" class="icon icon-verify" href=""
                                   ng-click="c.enter_password(m)" title="Click to verify"></a>
                                <img src="public/css/fonts/glyphicons-519-option-horizontal.png" title="Add comment" ng-click="c.show_comment(m)">
                                <message-react message="m" folder="inbox" react="c.react"></message-react>
                            </td></tr>
                            <tr><td><table style="margin-right: 0; margin-left: auto;">
                                <tr>
                                    <td></td>
                                    <td ng-repeat="r in c.get_reactions(m)">
                                        <react-info-img message="m" reaction="r"></react-info-img>
                                    </td>
                                    <td><react-info-count message="m" count="c.get_reactions_count(m)"></react-info-count></td>
                                </tr>
                            </table></td></tr>
                        </table>

                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: left">
                        <div ng-class="m|messageOverflowInbox" data-seq="{{m.message.seq}}">Hi <span ng-bind-html="m|formatChatMessageAlias"></span>
                            <img ng-src="{{m|findMessageReceiverAvatar}}" height="18" width="18"
                                 title="Click to chat" alt="Click to chat"
                                 ng-click="c.chat_contact(m.contact)">
                            <span ng-bind-html="m|formatChatMessage"></span>
                        </div>
                    </td>
                </tr>
                <tr ng-show="m.overflow">
                    <td colspan="2" style="text-align: center" >
                        <a href="" ng-click="c.hide_overflow(m)">Show more text</a>
                    </td>
                </tr>
                <tr ng-show="m.message.message.money_transactions">
                    <td colspan="2">
                        <table>
                            <thead>
                            <tr><td colspan="7">&nbsp;</td></tr>
                            <tr><td colspan="7" style="text-align: left">Included money transactions:</td></tr>
                            <tr>
                                <th>Action</th>
                                <th>&nbsp;</th>
                                <th>Currency</th>
                                <th>&nbsp;</th>
                                <th>Wallet</th>
                                <th>&nbsp;</th>
                                <th>Amount</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat-start="mt in m.message.message.money_transactions" style="vertical-align: top">
                                <td ng-bind="mt.action" style="text-align: left"></td>
                                <td></td>
                                <td ng-bind="mt.name" style="text-align: left"></td>
                                <td></td>
                                <td style="text-align: left"><a href="" ng-click="c.open_wallet(mt,2)" ng-bind="mt.wallet_name"></a></td>
                                <td></td>
                                <td ng-bind="mt.amount"></td>
                            </tr>
                            <tr ng-repeat-end>
                                <td colspan="7" style="vertical-align: top; text-align: left">
                                    <span ng-show="mt.message.html" ng-bind-html="mt.message.html"></span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="7" style="text-align: left">
                                    <span ng-bind-html="m.message.message.money_transactions_status.html"></span>
                                    <span ng-show="m.message.message.money_transactions_status.spinner">
                                        <img src="public/images/spinner-16.gif">
                                        <span ng-bind="m.message.message.money_transactions_status.countdown"></span>
                                    </span>
                                </td>
                            </tr>
                            </tbody>
                            <tbody>
                            <tr><td colspan="7"></td></tr>
                            <tr><td colspan="7" style="text-align: left">My wallet status:<span ng-bind="m|myTransactionStatus"></span></td></tr>
                            <tr><td colspan="7" style="text-align: left">Contact wallet status:<span ng-bind="m|contactTransactionStatus"></span></td></tr>
                            </tbody>
                            <tbody>
                            <tr><td colspan="7">&nbsp;</td></tr>
                            <tr><td colspan="7" style="text-align: left">
                                Action:
                                <span ng-click="m.message.message.money_transactions_status.spinner || c.approve_money_transactions(m)" title="Approve money transactions?">Approve<img src="public/css/fonts/glyphicons-207-ok.png"></span>&nbsp;
                                <span ng-click="m.message.message.money_transactions_status.spinner || c.reject_money_transactions(m)"  title="Reject money transactions?"> Reject<img src="public/css/fonts/glyphicons-208-remove.png"></span>&nbsp;
                                <span ng-click="m.message.message.money_transactions_status.spinner || c.edit_money_transactions(m)"    title="Reject, edit and return money transactions?"> Edit<img src="public/css/fonts/glyphicons-31-pencil.png"></span>&nbsp;
                                <span ng-click="m.message.message.money_transactions_status.spinner || c.balance_money_transactions(m)" title="Show/update wallet balance"> Balance<img src="public/css/fonts/glyphicons-86-repeat.png"></span>
                            </td></tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr ng-show="c.show_image(m)">
                    <td colspan="2">
                        <img ng-src="{{c.get_image_src(m)}}" >
                    </td>
                </tr>
                <tr ng-show="m.show_comment">
                    <td colspan="2" style="width: 99%">
                                        <textarea class="autosize postfield new_chat_msg" ng-model="m.comment"
                                                  rows="1" required ng-keyup="c.handleTextAreaHeight($event)"
                                                  placeholder="Enter comment">
                                        </textarea>
                    </td>
                </tr>
                <tr ng-show="m.show_comment && m.comment_src">
                    <td colspan="2" style="width: 99%">
                        <img ng-src="{{m.comment_src}}">
                    </td>
                </tr>
                <tr ng-show="m.show_comment">
                    <td colspan="2" style="width: 99%; text-align: right">
                        <div class="image-upload">
                            <label for="{{m|commentFileInputId}}"><img src="public/css/fonts/glyphicons-12-camera.png"></label>
                            <input id="{{m|commentFileInputId}}" type="file"
                                   accept=".png, .jpg, .jpeg, .gif, .tif"
                                   custom-on-change="c.uploadImage"/>
                        </div>
                        <button type="submit" ng-click="c.create_comment(m)">Send</button>
                    </td>
                </tr>
                <tr ng-show="m.messages"><td colspan="2">&nbsp;</td></tr>
                <tr ng-show="m.messages">
                    <td colspan="2" style="width: 99%; text-align: right; background-color: white;padding-top: 15px;">
                        <div>
                            <ul ng-if="m.messages" class="list-unstyled media-block">
                                <li ng-repeat="m in m.messages|filter:c.chat_filter|orderBy:c.chat_order_by:true" class="mar-btm" ng-include="'messageTree'">
                                </li>
                            </ul>
                        </div>
                    </td>
                </tr>
            </table>

        </div>

        <!-- end messageTree -->
    </script>

    <script type="text/ng-template" id="chat.html">

        <div class="bodyfull">

            <div class="scroller-companies" infinite-scroll="c.get_more_messages()"
                 infinite-scroll-container='".bodyfull"'>

                <p ng-show="c.show_welcome_msg1()">No contacts were found. Please go to "Account" page and enter/update search tags.</p>

                <p ng-show="c.show_welcome_msg2()">No chat messages were found. Please go to "Network" page and add contacts and/or start chatting.</p>

                <div ng-show="c.show_no_welcome()">

                    <p>
                    <span ng-hide="c.contact">
                    Filter:
                    <input type="button" value="All" ng-click="c.toggle_filter('all')"
                           style="color: {{c.setup.contact_filters.all}}"/>&nbsp;
                    <span ng-hide="c.setup.block_guests">
                        <input type="button" value="Guest" ng-click="c.toggle_filter('guest')"
                               style="color: {{c.setup.contact_filters.guest}}"/>&nbsp;
                    </span>
                    <input type="button" value="New" ng-click="c.toggle_filter('new')" style="color: {{c.setup.contact_filters.new}}"/>&nbsp;
                    <input type="button" value="Unverified" ng-click="c.toggle_filter('unverified')" style="color: {{c.setup.contact_filters.unverified}}"/>&nbsp;
                    <input type="button" value="Verified" ng-click="c.toggle_filter('verified')" style="color: {{c.setup.contact_filters.verified}}"/>&nbsp;
                    <input type="button" value="Ignored" ng-click="c.toggle_filter('ignore')" style="color: {{c.setup.contact_filters.ignore}}"/>&nbsp;

                    </span>

                    Sort:
                    <input type="text" placeholder="Start typing" ng-model="c.setup.chat_sort" class="user_info"
                           style="width: 140px"
                           uib-typeahead="sort for sort in c.chat_sort_options | filter:$viewValue | limitTo:8"
                           typeahead-editable="false"
                           alt="{{c.chat_sort_title}}" title="{{c.chat_sort_title}}"
                           typeahead-on-select="c.chat_sort_changed()">

                    <span class="two_panel_chat">
                        Two panel chat:
                        <input type="checkbox" ng-model="c.setup.two_panel_chat" ng-change="c.two_panel_chat_changed()">
                    </span>

                    </p>

                    <div style="width: 99%; border-style: solid; border-width: 2px;">

                        <table style="width: 100%">
                            <tbody>
                            <tr>
                                <td ng-bind="c.chat_hint()"><td>
                                <td style="text-align: right; vertical-align: top; white-space: nowrap;">

                                    <span ng-show="c.chat_hint_start_chat()">
                                        Public chat?
                                        <input type="checkbox" ng-model="c.setup.public_chat"
                                               ng-change="c.public_chat_changed()" ng-disabled="!c.is_logged_in()">
                                    </span>
                                    <span ng-hide="!c.chat_hint_chatting()">
                                        <img ng-show="c.chat_hint_pushpin()" ng-click="c.start_editing_grp_chat()"
                                              src="public/css/fonts/glyphicons-336-pushpin.png"
                                              title="Click to update participants in this chat">
                                        <img ng-show="c.editing_grp_chat" ng-click="c.stop_editing_grp_chat()"
                                              src="public/css/fonts/glyphicons-207-ok.png"
                                              title="Click when finished updating participants in group chat">
                                        <img src="public/css/fonts/glyphicons-208-remove.png" ng-click="c.see_all_chat()"
                                             title="Click to see all chat messages">
                                    </span>

                                </td>
                            </tr>
                            </tbody>
                        </table>

                        <div ng-show="c.contact && !c.group_chat">

                            <table>
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>Tag</th>
                                    <th></th>
                                    <th>Value</th>
                                    <th></th>
                                    <th>Privacy</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td rowspan="{{c.contact.search.length+2}}" style="vertical-align: top">
                                        <img ng-src="{{c.contact|findContactAvatar}}" class="img-circle img-sm">
                                    </td>
                                    <td>User Id</td>
                                    <td>&nbsp;</td>
                                    <td>
                                        <span ng-hide="c.contact.edit_alias" ng-bind-html="c.contact|contactAlias"
                                              title="{{c.contact.cert_user_id}}. Click to edit" ng-click="c.edit_alias()"></span>
                                        <span ng-show="c.contact.edit_alias">
                                            <input type="text" ng-model="c.contact.new_alias" style="width: 110px" id="contact_alias_id"
                                                   on-key-enter="c.save_user_info()" on-key-escape="c.cancel_edit_alias()">
                                        </span>
                                    </td>
                                    <td>&nbsp;</td>
                                    <td>-</td>
                                    <td rowspan="{{c.contact.search.length+2}}" style="vertical-align: top">
                                        <input ng-show="c.contact|showContactAction:'ignore'" type="button"
                                               value="Ignore"
                                               ng-click="c.contact_ignore(x)" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.contact|showContactAction:'unplonk'" type="button"
                                               value="Unplonk"
                                               ng-click="c.contact_unplonk(x)" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.contact|showContactAction:'add'" type="button" value="Add"
                                               ng-click="c.contact_add(x)" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.contact|showContactAction:'remove'" type="button"
                                               value="Remove"
                                               ng-click="c.contact_remove(x)" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.contact|showContactAction:'verify'" type="button"
                                               value="Verify"
                                               ng-click="c.contact_verify(x)"  ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.show_contact_delete()" type="button" value="Delete"
                                               ng-click="c.contact_delete()" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.show_contact_mute_add()" type="button" value="Mute" ng-click="c.contact_mute_add()" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.show_contact_mute_remove()" type="button" value="Unmute" ng-click="c.contact_mute_remove()" ng-disabled="!c.is_logged_in()"/>
                                        <input ng-show="c.show_delete_user1" type="button" value="Admin"
                                               ng-click="c.delete_user1()" ng-disabled="!c.is_logged_in()"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>User type</td>
                                    <td>&nbsp;</td>
                                    <td ng-bind="c.contact.type"></td>
                                    <td>&nbsp;</td>
                                    <td>-</td>
                                </tr>
                                <tr ng-repeat="s in c.contact.search">
                                    <td ng-bind-html="s.tag|shy:10"></td>
                                    <td></td>
                                    <td ng-bind-html="s|formatSearchValue:25" title="{{s|formatSearchTitle}}"></td>
                                    <td></td>
                                    <td ng-bind-html="s.privacy"></td>
                                </tr>
                                </tbody>
                            </table>

                        </div>

                        <div ng-show="c.group_chat" style="width: 100%">
                            <span ng-repeat="x in c.group_chat_contacts" style="padding-left: 5px; padding-bottom: 5px;">
                                <table style="display: inline">
                                    <tbody>
                                    <tr>
                                        <td>
                                            <img ng-show="c.editing_grp_chat" ng-src="{{x|findContactAvatar}}"
                                                 ng-click="c.grp_chat_add(x)" title="Click to remove contact from group chat">
                                            <img ng-hide="c.editing_grp_chat" ng-src="{{x|findContactAvatar}}"
                                                 ng-click="c.chat_contact(x)" title="Click to chat with contact">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td ng-bind-html="x|contactAlias"></td>
                                    </tr>
                                    <tr>
                                        <td ng-bind="x|getLastUpdated"></td>
                                    </tr>
                                    <tr>
                                        <td ng-bind="x.type"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </span>
                        </div>

                    </div>


                    <br>

                    <ul class="list-unstyled media-block">

                        <li ng-show="c.contact || c.group_chat || c.setup.public_chat">

                            <div class="media-left">
                                <img ng-src="{{c.avatar.src}}" class="img-circle img-sm" alt="Avatar">
                            </div>

                            <div class="media-body pad-hor">
                                <form name="new_chat_msg_form" class="css-form" novalidate>
                                    <div imagedrop on-image-drop="c.imageDropped()">
                                        <table class="speech" style="width: 100%">
                                            <tbody style="display: table; width: inherit;">
                                            <tr>
                                                <td class="media-heading" style="white-space: nowrap;">
                                                    <span ng-bind-html="c.setup.alias">Me</span>
                                                    <img src="public/css/fonts/glyphicons-177-forward.png">
                                                    <span ng-bind-html="c.contact|contactAlias"></span>
                                                    <img ng-src="{{c.contact|contactSrc}}" title="{{c.contact|contactSrcTitle}}">
                                                </td>

                                                <td style="text-align: right; vertical-align: top; width: 99%">
                                                    <span class="speech-time"><i
                                                            class="fa fa-clock-o fa-fw"></i>Now</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2" style="width: 99%">
                                                    <textarea class="autosize postfield new_chat_msg" id="new_chat_msg"
                                                              placeholder="{{[c.contact,c.z.site_info.cert_user_id]|contactPlaceholderText}}" rows="1" required
                                                              ng-model="c.new_chat_msg" ng-keyup="c.handleTextAreaHeight($event)">
                                                    </textarea>
                                                    <span ng-show="c.chat_hint_pubkey()">Chat not possible for this contact. No public key was found on ZeroNet. Could be an old inactive contact. Data on ZeroNet are deleted after {{c.no_days_before_cleanup}} days. Keep contact and chat if you think that contact will return to Money Network later. Delete contact and chat if you think that user has left Money Network for good.</span>
                                                    <span ng-show="c.group_chat && (c.group_chat_contacts.length == 0)">Group chat disabled. Please select one or more contacts. Click on avatars.</span>
                                                </td>
                                            </tr>
                                            <tr ng-show="c.new_chat_src">
                                                <td colspan="2">
                                                    <div style="position: relative; display: inline-block;">
                                                        <img ng-click="c.new_chat_src_remove()"
                                                             src="public/css/fonts/glyphicons-208-remove.png"
                                                             style="position: absolute; right: 0;">
                                                        <img ng-src="{{c.new_chat_src}}">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2" style="width: 99%; text-align: right">

                                                    <div class="image-upload">
                                                        <label for="file-input"><img src="public/css/fonts/glyphicons-12-camera.png"></label>
                                                        <input id="file-input" type="file"
                                                               accept=".png, .jpg, .jpeg, .gif, .tif"/>
                                                    </div>

                                                    <button type="submit" ng-click="c.send_chat_msg()"
                                                            ng-disabled="new_chat_msg_form.$invalid">Send
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </form>
                            </div>
                        </li>

                        <li ng-repeat="m in c.messages|filter:c.chat_filter|orderBy:c.chat_order_by:true|limitTo: c.chat_page_context.infinite_scroll_limit" class="mar-btm" ng-include="'messageTree'">
                        </li>

                    </ul>

                </div>

            </div>

        </div>
        <!-- end chat.html -->
    </script>

    <script type="text/ng-template" id="chat2.html">

        <div class="bodyleft">
            <p>
                Sort:
                <input type="text" placeholder="Start typing" ng-model="c.setup.contact_sort" class="user_info"
                       style="width: 140px"
                       uib-typeahead="sort for sort in c.contact_sort_options | filter:$viewValue | limitTo:8"
                       typeahead-editable="false"
                       alt="{{c.contact_sort_title}}" title="{{c.contact_sort_title}}"
                       typeahead-on-select="c.contact_sort_changed()">
            </p>

            <table>
                <thead>
                <tr>
                    <th style="text-align: center"
                        title="Money Network contacts. Click on User id to update alias">Money Network contacts</th>
                </tr>
                </thead>
                <tbody><tr><td>&nbsp;</td></tr></tbody>
                <tbody ng-repeat="x in c.contacts|filter:c.contact_filter|orderBy:c.contact_order_by" ng-style="c.contact_background_color(x)">
                <tr>
                    <td>
                        <contact-info contact="x" title="Click to chat with contact" chat="c.chat_contact(x)" fallback-src="public/images/image_failed.gif"></contact-info>
                    </td>
                </tr><tr style="background-color: white"><td>&nbsp;</td></tr>
                </tbody>
            </table>

        </div>

        <div class="bodyright">

            <div infinite-scroll="c.get_more_messages()" infinite-scroll-container='".bodyright"'>

                <p>
                    Filter:
                    <input type="button" value="All" ng-click="c.toggle_filter('all')"
                           style="color: {{c.setup.contact_filters.all}}"/>&nbsp;
                    <span ng-hide="c.setup.block_guests">
                        <input type="button" value="Guest" ng-click="c.toggle_filter('guest')" style="color: {{c.setup.contact_filters.guest}}"/>&nbsp;
                    </span>
                    <input type="button" value="New" ng-click="c.toggle_filter('new')" style="color: {{c.setup.contact_filters.new}}"/>&nbsp;
                    <input type="button" value="Unverified" ng-click="c.toggle_filter('unverified')" style="color: {{c.setup.contact_filters.unverified}}"/>&nbsp;
                    <input type="button" value="Verified" ng-click="c.toggle_filter('verified')" style="color: {{c.setup.contact_filters.verified}}"/>&nbsp;
                    <input type="button" value="Ignored" ng-click="c.toggle_filter('ignore')" style="color: {{c.setup.contact_filters.ignore}}"/>&nbsp;

                    Sort:
                    <input type="text" placeholder="Start typing" ng-model="c.setup.chat_sort" class="user_info"
                           style="width: 140px"
                           uib-typeahead="sort for sort in c.chat_sort_options | filter:$viewValue | limitTo:8"
                           typeahead-editable="false"
                           alt="{{c.chat_sort_title}}" title="{{c.chat_sort_title}}"
                           typeahead-on-select="c.chat_sort_changed()">

                <span class="two_panel_chat">
                    Two panel chat:
                    <input type="checkbox" ng-model="c.setup.two_panel_chat" ng-change="c.two_panel_chat_changed()">
                </span>

                </p>

                <div style="width: 99%; border-style: solid; border-width: 2px;">

                    <table style="width: 100%">
                        <tbody>
                        <tr>
                            <td ng-bind="c.chat_hint()"></td>
                            <td style="text-align: right; vertical-align: top; white-space: nowrap;">
                            <span ng-show="c.chat_hint_start_chat()">Public chat?<input type="checkbox" ng-model="c.setup.public_chat"
                                       ng-change="c.public_chat_changed()"  ng-disabled="!c.is_logged_in()"></span>
                            <span ng-hide="!c.chat_hint_chatting()">
                                <img ng-show="c.chat_hint_pushpin()" ng-click="c.start_editing_grp_chat()"
                                      src="public/css/fonts/glyphicons-336-pushpin.png"
                                      title="Click to update participants in this chat">
                                <img ng-show="c.editing_grp_chat" ng-click="c.stop_editing_grp_chat()"
                                      src="public/css/fonts/glyphicons-207-ok.png"
                                      title="Click when finished updating participants in group chat">
                                <img src="public/css/fonts/glyphicons-208-remove.png"  ng-click="c.see_all_chat()"
                                     title="Click to see all chat messages">

                            </span>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <div ng-show="c.contact && !c.group_chat">

                        <table>
                            <thead>
                            <tr>
                                <th></th>
                                <th>Tag</th>
                                <th></th>
                                <th>Value</th>
                                <th></th>
                                <th>Privacy</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td rowspan="{{c.contact.search.length+2}}" style="vertical-align: top">
                                    <img ng-src="{{c.contact|findContactAvatar}}" class="img-circle img-sm">
                                </td>
                                <td>User Id</td>
                                <td>&nbsp;</td>
                                <td>
                            <span ng-hide="c.contact.edit_alias" ng-bind-html="c.contact|contactAlias"
                                  title="{{c.contact.cert_user_id}}. Click to edit" ng-click="c.edit_alias()"></span>
                            <span ng-show="c.contact.edit_alias">
                                <input type="text" ng-model="c.contact.new_alias" style="width: 110px"
                                       id="contact_alias_id"
                                       on-key-enter="c.save_user_info()" on-key-escape="c.cancel_edit_alias()">
                            </span>
                                </td>
                                <td>&nbsp;</td>
                                <td>-</td>
                                <td rowspan="{{c.contact.search.length+2}}" style="vertical-align: top">
                                    <input ng-show="c.contact|showContactAction:'ignore'" type="button" value="Ignore"
                                           ng-click="c.contact_ignore()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.contact|showContactAction:'unplonk'" type="button" value="Unplonk"
                                           ng-click="c.contact_unplonk()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.contact|showContactAction:'add'" type="button" value="Add"
                                           ng-click="c.contact_add()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.contact|showContactAction:'remove'" type="button" value="Remove"
                                           ng-click="c.contact_remove()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.contact|showContactAction:'verify'" type="button" value="Verify"
                                           ng-click="c.contact_verify()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.show_contact_delete()" type="button" value="Delete"
                                           ng-click="c.contact_delete()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.show_contact_mute_add()" type="button" value="Mute" ng-click="c.contact_mute_add()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.show_contact_mute_remove()" type="button" value="Unmute" ng-click="c.contact_mute_remove()" ng-disabled="!c.is_logged_in()"/>
                                    <input ng-show="c.show_delete_user1" type="button" value="Admin"
                                           ng-click="c.delete_user1()" ng-disabled="!c.is_logged_in()"/>
                                </td>
                            </tr>
                            <tr>
                                <td>User type</td>
                                <td>&nbsp;</td>
                                <td ng-bind="c.contact.type"></td>
                                <td>&nbsp;</td>
                                <td>-</td>
                            </tr>
                            <tr ng-repeat="s in c.contact.search">
                                <td ng-bind-html="s.tag|shy:10"></td>
                                <td></td>
                                <td ng-bind-html="s|formatSearchValue:25" title="{{s|formatSearchTitle}}"></td>
                                <td></td>
                                <td ng-bind-html="s.privacy"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div ng-show="c.group_chat" style="width: 100%; min-height: 25px">
                    <span ng-show="c.show_group_delete()" style="float: right;">
                        <input type="button" value="Delete" ng-click="c.group_delete()"/>
                    </span>
                    <span ng-repeat="x in c.group_chat_contacts" style="padding-left: 5px; padding-bottom: 5px;">
                        <table style="display: inline">
                            <tbody>
                            <tr>
                                <td>
                                    <img ng-show="c.editing_grp_chat" ng-src="{{x|findContactAvatar}}"
                                         ng-click="c.grp_chat_add(x)" title="Click to remove contact from group chat">
                                    <img ng-hide="c.editing_grp_chat" ng-src="{{x|findContactAvatar}}"
                                         ng-click="c.chat_contact(x)" title="Click to chat with contact">
                                </td>
                            </tr>
                            <tr>
                                <td ng-bind-html="x|contactAlias">
                                </td>
                            </tr>
                            <tr>
                                <td ng-bind="x|getLastUpdated"></td>
                            </tr>
                            <tr>
                                <td ng-bind="x.type"></td>
                            </tr>
                            </tbody>
                        </table>
                    </span>

                    </div>

                </div>


                <br>

                <ul class="list-unstyled media-block">

                    <li ng-show="c.contact || c.group_chat || c.setup.public_chat">

                        <div class="media-left">
                            <img ng-src="{{c.avatar.src}}" class="img-circle img-sm" alt="Avatar">
                        </div>

                        <div class="media-body pad-hor">
                            <form name="new_chat_msg_form" class="css-form" novalidate>
                                <div imagedrop on-image-drop="c.imageDropped()">
                                    <table class="speech" style="width: 100%">
                                        <tbody style="display: table; width: inherit;">
                                        <tr>

                                            <td class="media-heading" style="white-space: nowrap;">
                                                <span ng-bind-html="c.setup.alias">Me</span>
                                                <img src="public/css/fonts/glyphicons-177-forward.png">
                                                <span ng-bind-html="c.contact|contactAlias"></span>
                                                <img ng-src="{{c.contact|contactSrc}}" title="{{c.contact|contactSrcTitle}}">
                                            </td>

                                            <td style="text-align: right; vertical-align: top; width: 99%">
                                                <span class="speech-time"><i class="fa fa-clock-o fa-fw"></i>Now</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2" style="width: 99%">
                                                <textarea class="autosize postfield new_chat_msg" id="new_chat_msg"
                                                          placeholder="{{[c.contact,c.z.site_info.cert_user_id]|contactPlaceholderText}}" rows="1" required
                                                          ng-model="c.new_chat_msg" ng-keyup="c.handleTextAreaHeight($event)" ng-disabled="c.new_chat_msg_disabled">
                                                </textarea>
                                                <span ng-show="c.chat_hint_pubkey()">
                                                    Chat not possible for this contact. No public key was found on ZeroNet.
                                                    Could be an old inactive contact. Data on ZeroNet are deleted after {{c.no_days_before_cleanup}} days.
                                                    Keep contact and chat if you think that contact will return to Money Network later.
                                                    Delete contact and chat if you think that user has left Money Network for good.
                                                </span>
                                                <span ng-show="c.group_chat && (c.group_chat_contacts.length == 0)">
                                                    Group chat disabled. Please select one or more contacts. Click on avatars.
                                                </span>
                                            </td>
                                        </tr>
                                        <tr ng-show="c.show_money">
                                            <td colspan="2" style="width: 98%">
                                                <table class="speech" style="width: 100%">
                                                    <thead>
                                                    <tr>
                                                        <th>Action</th>
                                                        <th>Currency</th>
                                                        <th>Amount</th>
                                                        <th>Unit</th>
                                                        <th>+/-</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat-start="mt in c.money_transactions" style="vertical-align: top">
                                                        <td>
                                                            <input type="text" placeholder="Action. Start typing ..." style="width: 70px; margin-bottom: 1px;"
                                                                   ng-model="mt.action" ng-required="c.money_required('action',mt)" ng-change="c.money_transaction_changed('action', mt)" ng-disabled="c.new_chat_msg_disabled"
                                                                   uib-typeahead="action for action in c.money_actions | filter:$viewValue | limitTo:8"
                                                                   typeahead-editable="false">
                                                        </td>
                                                        <td>
                                                            <input type="text" placeholder="Currency. Start typing ..." style="width: 300px; margin-bottom: 1px;"
                                                                   ng-model="mt.currency" ng-required="c.money_required('currency',mt)" ng-change="c.money_transaction_changed('currency', mt)" ng-disabled="c.new_chat_msg_disabled"
                                                                   uib-typeahead="currency.unique_text for currency in c.currencies | filter:$viewValue | limitTo:8"
                                                                   typeahead-editable="false">
                                                        </td>
                                                        <td><input type="text" placeholder="Amount" style="width: 80px; margin-bottom: 1px;" ng-pattern="c.money_amount_re"
                                                                   ng-model="mt.amount" ng-required="c.money_required('amount',mt)" ng-change="c.money_transaction_changed('amount', mt)" ng-disabled="c.new_chat_msg_disabled">
                                                        </td>
                                                        <td>
                                                            <input type="text" placeholder="Unit. Start typing ..." style="width: 80px; margin-bottom: 1px;"
                                                                   ng-model="mt.unit" ng-required="c.money_required('unit',mt)" ng-change="c.money_transaction_changed('unit', mt)" ng-disabled="c.new_chat_msg_disabled"
                                                                   uib-typeahead="unit.unit for unit in c.money_get_units(mt) | filter:$viewValue | limitTo:8"
                                                                   typeahead-editable="false" on-key-enter="c.money_insert_row(mt)">
                                                        </td>
                                                        <td title="Delete row">
                                                            <img ng-click="c.money_transaction_delete_row(mt)" ng-disabled="c.new_chat_msg_disabled"
                                                                    src="public/css/fonts/glyphicons-208-remove.png">
                                                        </td>
                                                    </tr>
                                                    <tr ng-repeat-end>
                                                        <td colspan="5" style="vertical-align: top">
                                                            <span ng-bind-html="mt.message.html"></span>
                                                            <span ng-show="mt.message.open_wallet"><a href="" ng-click="c.open_wallet(mt,1)">Open wallet</a></span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="5">
                                                            <span ng-bind="c.validate_money_transactions(true)"></span>
                                                            <span ng-show="c.new_chat_msg_disabled"><img src="public/images/spinner-16.gif"><span ng-bind="c.money_transactions_countdown"></span></span>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr ng-show="c.new_chat_src">
                                            <td colspan="2">
                                                <div style="position: relative; display: inline-block;">
                                                    <img ng-click="c.new_chat_src_remove()"
                                                         src="public/css/fonts/glyphicons-208-remove.png"
                                                         style="position: absolute; right: 0;">
                                                    <img ng-src="{{c.new_chat_src}}">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2" style="width: 99%; text-align: right">

                                                <img src="public/css/fonts/glyphicons-548-bitcoin.png" title="Add/remove money transaction"
                                                      ng-click="c.new_chat_add_money()" ng-disabled="c.new_chat_msg_disabled">

                                                <div class="image-upload" title="Add image">
                                                    <label for="file-input2">
                                                        <img src="public/css/fonts/glyphicons-12-camera.png">
                                                    </label>
                                                    <input id="file-input2" type="file"
                                                           accept=".png, .jpg, .jpeg, .gif, .tif"
                                                           custom-on-change="c.uploadImage"
                                                           ng-disabled="c.new_chat_msg_disabled || c.chat_hint_pubkey()"/>
                                                </div>

                                                <button type="submit" title="Send chat message"
                                                        ng-click="c.send_chat_msg()"
                                                        ng-disabled="c.new_chat_msg_disabled || new_chat_msg_form.$invalid">Send
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </form>
                        </div>
                    </li>

                    <li ng-repeat="m in c.messages|filter:c.chat_filter|orderBy:c.chat_order_by:true|limitTo: c.chat_page_context.infinite_scroll_limit" class="mar-btm" ng-include="'messageTree'">
                    </li>

                </ul>

            </div><!-- end infinite-scroll div -->

        </div><!-- end bodyright -->

        <!-- end chat2.html -->
    </script>

    <script type="text/ng-template" id="wallet.html">

        <div class="bodyfull">

            <p>Money Network wallet sites. No money is stored in Money Network but each<br>
                added Money Network wallet site gives API access to an external money system.<br>
            </p>
            
            <p>
                Add new wallet URL:
                <input type="text" placeholder="ZeroNet Money Network Wallet site URL"
                       ng-model="w.new_wallet_url" ng-disabled="w.test_running"
                       class="user_info" style="width: 300px">
                <button ng-show="w.show_test_new_wallet(1)" type="submit" ng-click="w.test_new_wallet()" ng-disabled="w.test_running">Test</button>
                <button ng-show="w.test_running" type="submit" ng-click="w.reset_test()">Reset</button>
                <button ng-show="w.show_add_new_wallet()" type="submit" ng-click="w.add_new_wallet()" ng-disabled="w.test_running">Add</button>
                <span ng-hide="w.show_test_new_wallet(2)">
                    <br>( Tip: You can test with URL = <a href="" ng-click="w.click_test_url()">1LqUnXPEgcS15UGwEgkbuTbKYZqAUwQ7L1</a> )
                </span>
            </p>

            <p ng-show="w.show_test_new_wallet(2)">
                Test results. You can use checkboxes to skip some tests steps and/or to enter manual feedback to test steps.
                <table ng-show="w.show_test_new_wallet(3)">
                <thead>
                <tr>
                    <th colspan="6"></th>
                    <th colspan="5" style="text-align: center">User feedback</th>
                </tr>
                <tr>
                    <th>#</th>
                    <th>&nbsp;</th>
                    <th>Test result</th>
                    <th>&nbsp;</th>
                    <th style="width: 80px">Status</th>
                    <th>&nbsp;</th>
                    <th>Skip</th>
                    <th>&nbsp;</th>
                    <th>OK</th>
                    <th>&nbsp;</th>
                    <th>Failed</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="t in w.tests">
                    <td ng-bind="t.info.no"></td>
                    <td></td>
                    <td ng-bind="t.info.text"></td>
                    <td></td>
                    <td ng-bind="t.info.status"></td>
                    <td></td>
                    <td style="text-align: center">
                        <input type="checkbox" ng-model="t.info.test_skipped" ng-change="w.test_feedback(t, 'skipped')"
                                ng-disabled="t.info.disabled">
                    </td>
                    <td></td>
                    <td style="text-align: center">
                        <input type="checkbox" ng-model="t.info.test_ok" ng-change="w.test_feedback(t, 'OK')"
                               ng-disabled="t.info.disabled">
                    </td>
                    <td></td>
                    <td style="text-align: center">
                        <input type="checkbox" ng-model="t.info.test_failed" ng-change="w.test_feedback(t, 'failed')"
                               ng-disabled="t.info.disabled">
                    </td>
                </tr>
                </tbody>
                </table>
            </p>
            <br>

            <p>
                Search known money systems: todo
            </p>

            <br>
            <p ng-include="'addHubs'"></p>

        </div>

        <!-- end wallet.html -->
    </script>

    <script type="text/ng-template" id="user.html">

        <div class="bodyfull">

            <p ng-show="u.show_welcome_msg">
                Welcome to Money Network. You are new here and you must have a network.
                Tags in this page (Account) are used when searching for contacts (Network) and for personal information
                (real or fake values).
            <ul ng-show="u.show_welcome_msg" style="list-style-type: disc;">
                <li>Tags. Tag and value pairs: Examples: Name: Donald Duck, Location: US, Phone: 1234567890.</li>
                <li>Wildcards can be used in Tag and Value. "%" = many characters. "_" = one character.</li>
                <li>Privacy: Hidden. 100% private. Total private search. No one can see your search.</li>
                <li>Privacy: Search. 100% public. Other users can see your "Search" tag words and find you.</li>
                <li>Private: Unverified. Some info send encrypted to untrusted contact when adding contact to your contact list.</li>
                <li>Private: Verified. More info send encrypted to trusted contact after end verification.</li>
                <li><b>Quick start: Enter %, % and Hidden, save and check out "Network" page.</b> Use tab to add extra lines. Have fun.</li>
            </ul>
            <p>

            <p ng-hide="u.show_welcome_msg">
                It is not required but you should add some info to identify you as user in the Money Network.
                It could be name, email, phone number, photo, company name, url, GPS location or whatever. Real or fake values.
                Wildcards can be used in Tag and Value. "%" = many characters. "_" = one character.
                User info are stored locally in your browser / on your device and are not validated by anyone.
                The user identification is used when searching for contacts, verifying contacts and is displayed in contact list.
                You decide what information that is revealed to other users in the Money Network.
                You decide when to trust other users in the Money Network.
                Thank you for using this Money Network demo.
            </p>

            <p>
                User identification:
                <button type="submit" disabled ng-show="user_info_form.$invalid">
                <img title="Please correct errors" src="public/css/fonts/glyphicons-207-ok.png">
                </button>
                <button type="submit" ng-click="u.update_user_info()" ng-show="user_info_form.$valid">
                <img title="Save changes" src="public/css/fonts/glyphicons-207-ok.png">
                </button>
                <button type="submit" ng-click="u.revert_user_info()">
                <img title="Revert changes" src="public/css/fonts/glyphicons-82-refresh.png">
                </button>
                <img ng-show="u.setup.guest" ng-src="{{u.avatar.src}}"
                     title="Sorry. Guest account cannot change avatar picture">
                <img ng-hide="u.setup.guest" ng-src="{{u.avatar.src}}" ng-click="u.upload_avatar()"
                     title="Click to change avatar">
                <span ng-hide="u.editing_alias" ng-bind-html="u.setup.alias" title="Click to edit your alias"
                      ng-click="u.edit_alias()"></span>
                <span ng-show="u.editing_alias" title="Edit alias. Press ENTER to save. Press ESC to cancel">
                    <input type="text" ng-model="u.setup_copy.alias" style="width: 110px" id="alias_id"
                           on-key-enter="u.save_alias()" on-key-escape="u.cancel_edit_alias()">
                </span>

            </p>
            <form name="user_info_form" class="css-form" novalidate>
                <table border="1">
                    <thead>
                    <tr>
                        <th style="text-align: center"
                            title="Tag: Name, Email, Phone, Photo, Company, URL and/or GPS. Tags are shared anonymous in tag cloud">Tag</th>
                        <th style="text-align: center" title="Tag value: Username, email address, profile picture etc.">Value</th>
                        <th style="text-align: center"
                            title="Privacy: Search, Public, Unverified, Verified or Hidden. See mouseover texts or click checkbox for more info">Privacy<input type="checkbox" ng-model="u.show_privacy_title" ng-change="u.show_privacy_title_changed()"></th>
                        <th style="text-align: center" ng-show="u.show_privacy_title">Privacy details</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="x in u.user_info">
                        <td title="Start typing. Select tag. Name, Email, Phone etc.">
                            <input type="text" placeholder="Start typing"
                                   ng-model="x.tag" ng-required="u.is_tag_required(x)"
                                   uib-typeahead="tag for tag in u.tags | filter:$viewValue | limitTo:8"
                                   class="user_info" style="width: 80px">
                        </td>
                        <td title="Enter tag value. Name, email-address, phone number etc">
                            <input type="text"
                                   ng-model="x.value" ng-required="u.is_value_required(x)"
                                   class="user_info">
                        </td>
                        <td title="{{x.privacy|privacyTitle}}">
                            <input type="text" placeholder="Start typing"
                                   ng-model="x.privacy"
                                   ng-required="u.is_privacy_required(x)" on-key-enter="u.insert_row(x)"
                                   uib-typeahead="privacy for privacy in u.privacy_options | filter:$viewValue | limitTo:8"
                                   typeahead-editable="false"
                                   class="user_info" style="width: 80px">
                        </td>
                        <td ng-show="u.show_privacy_title">{{x.privacy|privacyTitle}}</td>
                        <td title="Delete row">
                            <img ng-click="u.delete_row(x)" src="public/css/fonts/glyphicons-208-remove.png">
                        </td>
                    </tr>
                    </tbody>
                </table>
                <br>

                <p>
                    Update user info:
                    <button type="submit" disabled ng-show="user_info_form.$invalid">
                        <img title="Please correct errors" src="public/css/fonts/glyphicons-207-ok.png">
                    </button>
                    <button type="submit" ng-click="u.update_user_info()" ng-show="user_info_form.$valid">
                        <img title="Save changes" src="public/css/fonts/glyphicons-207-ok.png">
                    </button>
                    <button type="submit" ng-click="u.revert_user_info()">
                        <img title="Revert changes" src="public/css/fonts/glyphicons-82-refresh.png">
                    </button>
                </p>
            </form>

            <span ng-show="u.setup.guest">
            <table title="Show guest account password. You must remember this password if you want to use your guest account later. Best to register for a new account as guest accounts are temporary accounts and may be blocked from other users">
                <tbody>
                <tr>
                    <td>Show guest password?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.show_guest_password"></td>
                    <td>&nbsp;&nbsp;</td>
                    <td ng-show="u.setup.show_guest_password" ng-bind="u.guest_password"></td>
                </tr>
                </tbody>
            </table>
            <br>
            </span>

            <p title="Your unique chat address. Publish this URL to allow direct chat with you">PM: {{u.my_chat_url}}</p>

            <p title="Select preferred encryption for ingoing messages. Your JSEncrypt key is {{u.keysize}} bits long and is saved encrypted in your browser (localStorage). CryptMessage is using 256 bits key and is saved in your user.json file on your computer (or proxy server).">
                Preferred encryption:
                <input type="radio" ng-model="u.setup.encryption" value="1" ng-change="u.debug_settings_changed()" ng-disabled="u.keysize_disabled">
                <a href="https://github.com/travist/jsencrypt" target="_blank" rel="noopener noreferrer">JSEncrypt</a>{{u.keysize}} bits key
                <input type="radio" ng-model="u.setup.encryption" value="2" ng-change="u.debug_settings_changed()">
                <a href="https://zeronet.readthedocs.io/en/latest/site_development/zeroframe_api_reference/#plugin-cryptmessage"
                   target="_blank" rel="noopener noreferrer">CryptMessage</a>256 bits key
            </p>

            <div style="width: 100%;">

                <span style="padding-left: 10px; padding-bottom: 20px;">
                    <table style="display: inline" title="Use this section to enable/disable messages from guests, contacts on ignore list and public chat">
                    <tbody>
                    <tr>
                        <td colspan="3">Spam filters:</td>
                    </tr>
                    <tr>
                        <td>Block messages from Guests?</td>
                        <td>&nbsp;&nbsp;</td>
                        <td><input type="checkbox" ng-model="u.setup.block_guests" ng-change="u.spam_settings_changed()"></td>
                    </tr>
                    <tr>
                        <td>Block messages from Ignored list?</td>
                        <td></td>
                        <td><input type="checkbox" ng-model="u.setup.block_ignored" ng-change="u.spam_settings_changed()"></td>
                    </tr>
                    <tr title="Public chat is unencrypted and messages are shared with everyone">
                        <td>Enable public chat?</td>
                        <td></td>
                        <td><input type="checkbox" ng-model="u.setup.public_chat" ng-change="u.spam_settings_changed()"></td>
                    </tr>
                    </tbody>
                    </table>
                </span>

                <span style="padding-left: 10px; padding-bottom: 20px;">
                    <table style="display: inline" title="Other account settings">
                        <tbody>
                        <tr>
                            <td colspan="4">Other settings:</td>
                        </tr>
                        <tr title="Check to hide when you are online. 'Online' timestamp in user interface (Network and Chat) is not updated. Timestamp in content.json file is still updated">
                            <td>Show as offline</td>
                            <td>&nbsp;&nbsp;</td>
                            <td><input type="checkbox" ng-model="u.setup.not_online" ng-change="u.spam_settings_changed()"></td>
                        </tr>
                        <tr title="Check to always send reactions as private messages. Your reactions will anonymous and only creator of message will know your ID. Private reactions are not completely anonymous. Reactions may be traced by monitoring the file trafic on ZeroNet.">
                            <td>Private reactions</td>
                            <td></td>
                            <td><input type="checkbox" ng-model="u.setup.private_reactions" ng-change="u.spam_settings_changed()"></td>
                        </tr>
                        <tr title="">
                            <td></td>
                            <td></td>
                            <td><input type="checkbox" ng-model="u.setup.todo2" ng-change="u.spam_settings_changed()"></td>
                        </tr>
                        </tbody>
                    </table>
                </span>

            </div>
            <br>

            <table title="Some usefull admin tasks:">
                <tbody>
                <tr><td colspan="3">Admin section:</td></tr>
                <tr title="Close account and delete data from ZeroNet and localStorage. Delete this account will delete data for this account only. Delete all accounts will remove all data from ZeroNet and all data from localStorage. No way back. You maybe want to make a localStorage export before doing this ...">
                    <td>Delete account:</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><a href="" ng-click="u.delete_user2(false)" id="test_delete_user2">delete this account</a> / <a href="" ng-click="u.delete_user2(true)">delete all accounts</a></td>
                </tr>
                </tbody>
                <tbody title="Full localStorage and ZeroNet export/import. Used as backup or when moving from one browser/device to an other browser/device. ZeroNet certificates and avatar icons are not included in export. localStorage data is always included in export. Recommend that ZeroNet user files (data.json and status.json) also is included. Recommend that uploaded optional files (public chat messages) are not included. You also have the option to encrypt export txt file. localStorage and data.json files are already encrypted. Optional files (public chat) are not">
                <tr>
                    <td>Export/import data</td>
                    <td></td>
                    <td>
                        <table>
                            <tbody>
                            <tr>
                                <td><a href="" ng-click="u.export()">export</a></td>
                                <td>&nbsp;&nbsp;/&nbsp;&nbsp;</td>
                                <td>import:&nbsp;&nbsp;</td>
                                <td><input id="import" type="file" accept=".txt" custom-on-change="u.import"/></td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>

                <tr>
                    <td style="text-align: center; vertical-align: top">
                        <input type="checkbox" ng-model="u.export_show_options">Export options<span ng-show="u.export_show_options">:<br>include</span>
                    </td>
                    <td></td>
                    <td>
                        <table ng-show="u.export_show_options">
                            <tbody>
                            <tr title="localStorage data is always included in export/import.">
                                <td><input type="checkbox" ng-model="u.export_ls" disabled></td>
                                <td>localStorage</td>
                                <td>&nbsp;&nbsp;</td>
                                <td ng-bind="u.export_info.ls"></td>
                            </tr>
                            <tr title="ZeroNet user files. data.json, like.json, status.json and uploaded avatar icon. Used in encrypted communication with other ZeroNet users. Recommend that the ZeroNet user data files are included in export">
                                <td><input type="checkbox" ng-model="u.export_z"></td>
                                <td>ZeroNet user files</td>
                                <td></td>
                                <td ng-bind="u.export_info.z"></td>
                            </tr>
                            <tr title="Check to included optional files in export. This is your unencrypted public chat and encrypted images from private chat">
                                <td><input type="checkbox" ng-model="u.export_chat"></td>
                                <td>ZeroNet optional files</td>
                                <td></td>
                                <td ng-bind="u.export_info.chat"></td>
                            </tr>
                            <tr title="Check to included wallets in export. This is localStorage from wallets">
                                <td><input type="checkbox" ng-model="u.export_wallets"></td>
                                <td>Wallets localStorage</td>
                                <td></td>
                                <td ng-bind-html="u.export_info.wallets"></td>
                            </tr>
                            <tr ng-show="u.export_wallets" ng-repeat="w in u.wallets" title="Click on wallet name to open wallet session in a new browser tab. Click on checkbox to include/exclude wallet in export">
                                <td></td>
                                <td colspan="3">
                                    <input type="checkbox" ng-model="w.export">
                                    <a href="" ng-click="u.open_wallet(w)" ng-bind="w.wallet_name"></a>
                                    <span ng-bind="w.ping_error" style="color:red;"></span>
                                </td>
                            </tr>
                            <tr title="Check to create a password protected export file. Data in localStorage and data.json file are already encrypted. Optional files with public unencrypted chat are not">
                                <td style="vertical-align: top"><input type="checkbox" ng-model="u.export_encrypt"></td>
                                <td style="vertical-align: top">Encrypt export file</td>
                                <td></td>
                                <td>
                                    <table ng-show="u.export_encrypt">
                                        <tbody>
                                        <tr>
                                            <td>Password</td>
                                            <td>:</td>
                                            <td>
                                                <input type="password" ng-model="u.export_password" required
                                                       placeholder="Enter password" style="width: 120px">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Confirm</td>
                                            <td>:</td>
                                            <td>
                                                <input type="password" ng-model="u.export_confirm_password" required
                                                       placeholder="Repeat password" style="width: 120px">
                                            </td>
                                        </tr>
                                        </tbody>

                                    </table>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>

                <tr ng-show="u.import_info">
                    <td style="text-align: center; vertical-align: top">
                        <input type="checkbox" ng-model="u.import_show_options">Import options<span ng-show="u.import_show_options">:<br>include</span>
                    </td>
                    <td></td>
                    <td>
                        <table ng-show="u.import_show_options">
                            <tbody>
                            <tr title="localStorage data is always included in export/import.">
                                <td><input type="checkbox" ng-model="u.import_ls" disabled></td>
                                <td>localStorage</td>
                                <td>&nbsp;&nbsp;</td>
                                <td ng-bind="u.import_info.ls"></td>
                            </tr>
                            <tr title="ZeroNet user files. data.json, like.json, status.json and uploaded avatar icon. Used in encrypted communication with other ZeroNet users. Recommend that the ZeroNet user data files are included in import">
                                <td><input type="checkbox" ng-model="u.import_z"></td>
                                <td>ZeroNet user files</td>
                                <td></td>
                                <td ng-bind="u.import_info.z"></td>
                            </tr>
                            <tr title="Check to included optional files in export. This is your unencrypted public chat and encrypted images from private chat">
                                <td><input type="checkbox" ng-model="u.import_chat"></td>
                                <td>ZeroNet optional files</td>
                                <td></td>
                                <td ng-bind="u.import_info.chat"></td>
                            </tr>
                            <tr title="Check to included wallets in export. This is localStorage from wallets">
                                <td><input type="checkbox" ng-model="u.import_wallets"></td>
                                <td>Wallets localStorage</td>
                                <td></td>
                                <td ng-bind-html="u.import_info.wallets"></td>
                            </tr>
                            <tr ng-show="u.import_wallets" ng-repeat="w in u.wallets|filter:{import_file_index:'!-1'}" title="Click on wallet name to open wallet session in a new browser tab. Click on checkbox to include/exclude wallet in import">
                                <td></td>
                                <td colspan="3">
                                    <input type="checkbox" ng-model="w.import">
                                    <a href="" ng-click="u.open_wallet(w)" ng-bind="w.wallet_name"></a>
                                    <span ng-bind="w.ping_error" style="color:red;"></span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>

                <tr><td colspan="3">&nbsp;</td></tr>
                <tr title="Click link to change password. Enter old and new password. Minimum password length 10 characters">
                    <td style="vertical-align: top">Password:</td>
                    <td></td>
                    <td>
                        <span ng-hide="u.change_password.show"><a href="" ng-click="u.show_passwords_fields(true)">change password</a></span>
                        <span ng-show="u.change_password.show">
                            <form name="change_password" ng-submit="u.change_password.submit()">
                            <table>
                                <tbody>
                                <tr>
                                    <td>Old password</td>
                                    <td>:</td>
                                    <td>
                                        <input type="password" ng-model="u.change_password.old_password" required
                                               ng-minlength="10" placeholder="Enter password" style="width: 120px">
                                    </td>
                                    <td rowspan="3">
                                        <input type="submit" value="Change" ng-disabled="change_password.$invalid">
                                    </td>
                                </tr>
                                <tr>
                                    <td>New password</td>
                                    <td>:</td>
                                    <td>
                                        <input type="password" ng-model="u.change_password.new_password" required
                                               ng-minlength="10" placeholder="Enter new password" style="width: 120px">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Confirm password</td>
                                    <td>:</td>
                                    <td>
                                        <input type="password" ng-model="u.change_password.confirm_new_password" required
                                               ng-minlength="10" placeholder="Repeat new password" style="width: 120px">
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3">Enter old and new password. Min 10 characters.</td>
                                    <td style="text-align: right">
                                        <a href="" ng-click="u.show_passwords_fields(false)">hide</a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            </form>
                        </span>
                    </td>
                </tr>
                <tr><td colspan="3">&nbsp;</td></tr>
                <tr title="Select preferred emoji style (apple, facebook, google, messenger, one, samsung, twitter or windows). Default: get emojis from https://twemoji.maxcdn.com. emoji/xxx: download used emojis as optional files on ZeroNet. Select optional files on ZeroNet if you want to avoid clearnet">
                    <td>Emoji style:</td>
                    <td></td>
                    <td>
                        <input type="text" placeholder="Start typing" typeahead-on-select="u.spam_settings_changed()"
                               ng-model="u.setup.emoji_folder" ng-change="u.spam_settings_changed()"
                               uib-typeahead="folder for folder in u.emoji_folders | filter:$viewValue | limitTo:8"
                               typeahead-editable="false"
                               class="user_info" style="width: 200px">
                    </td>
                </tr>
                <tr title="Click to customize your reactions." ng-click="u.edit_reactions(true)">
                    <td>Reactions:</td>
                    <td></td>
                    <td>
                        <table>
                            <tbody>
                            <tr>
                                <td class="reaction_td" ng-repeat="r in u.user_reactions">
                                    <img height="20" width="20" ng-src="{{r.src}}" title="{{r.title}}" class="grow20pct">
                                </td>
                                <td>
                                    <img ng-hide="u.editing_reactions" src="public/css/fonts/glyphicons-31-pencil.png" href="">
                                    <img ng-show="u.editing_reactions" src="public/css/fonts/glyphicons-207-ok.png"
                                          title="Save" ng-click="u.edit_reactions(false); $event.stopPropagation();">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr ng-show="u.editing_reactions" title="Update your reactions. Recommends max 6-7 reactions in reaction popover. Full emoji list at http://unicode.org/emoji/charts/full-emoji-list.html">
                    <td colspan="3">
                        <table>
                            <thead>
                            <tr>
                                <td colspan="5">Updating your reactions bar. See full emoji list at <a href="http://unicode.org/emoji/charts/full-emoji-list.html" target="_blank" rel="noopener noreferrer">unicode</a></td>
                            </tr>
                            <tr>
                                <td>Unicode</td>
                                <td>&nbsp;</td>
                                <td>Emoji</td>
                                <td>&nbsp;</td>
                                <td>Text</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="r in u.user_reactions">
                                <td ng-bind="r.src|reactionUniCode" class="reaction_td"></td>
                                <td><img src="public/css/fonts/glyphicons-214-arrow-up.png"
                                          title="Move up" ng-click="u.move_reaction_up(r)"></td>
                                <td class="reaction_td">
                                    <img height="20" width="20" ng-src="{{r.src}}" title="{{r.title}}" class="grow20pct"
                                         fallback-src="public/images/image_failed.gif">
                                </td>
                                <td><img src="public/css/fonts/glyphicons-213-arrow-down.png"
                                          title="Move down" ng-click="u.move_reaction_down(r)"></td>
                                <td>
                                    <input type="text" ng-model="r.title" style="width: 160px">
                                    <img src="public/css/fonts/glyphicons-208-remove.png"
                                          title="Delete" ng-click="u.delete_reaction(r)">
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">Add new:</td>
                                <td colspan="3">
                                    <input type="text" placeholder="Start typing"
                                           ng-model="u.new_reaction"
                                           typeahead-on-select="u.insert_new_reaction()"
                                           uib-typeahead="reaction for reaction in u.reaction_list | filter:$viewValue | limitTo:8"
                                           typeahead-editable="false"
                                           style="width: 250px">
                                </td>
                            </tr>
                            <tr title="Use this checkbox to filter list of emojis. Full supported emojis are emojis supported by apple, facebook, google, messenger, one, samsung, twitter and windows and available online (https://twemoji.maxcdn.com)">
                                <td colspan="5"><input type="checkbox" ng-model="u.full_emoji_support" ng-change="u.toogle_full_emoji_support()">Add only full supported emojis?</td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                </tbody>
            </table>
            <br>

            <table>
                <tbody>
                <tr>
                    <td>
                        <p ng-include="'addHubs'"></p>
                    </td>
                </tr>
                </tbody>
            </table>
            <br>

            <table title="Use this section to enable/disable debug information in browser console (F12)">
                <tbody>
                <tr>
                    <td>Enable debug info?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.enabled" ng-change="u.debug_settings_changed()"></td>
                </tr>
                </tbody>
                <tbody ng-show="u.setup.debug.enabled">
                <tr title="Click to see all select statements">
                    <td>Show sql selects?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.select" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all ZeroFrame.fileGet operations">
                    <td>Show fileGet?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_file_get" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all ZeroFrame.fileWrite operations">
                    <td>Show fileWrite?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_file_write" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all ZeroFrame.fileDelete operations">
                    <td>Show fileDelete?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_file_delete" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all ZeroFrame.serverInfo operations">
                    <td>Show serverInfo?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_server_info" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all ZeroFrame.cryptMessage operations">
                    <td>Show cryptMessage?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_crypt_message" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all site publish operations">
                    <td>Show sitePublish?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_site_publish" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see dbQuery operations">
                    <td>Show dbQuery?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.z_db_query" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see file done event processing of content.json, data.json and status.json files">
                    <td>File done events?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.file_done" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all ingoing messages. You should also click Show unencrypted messages and/or Show encrypted messages">
                    <td>Show ingoing messages?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.inbox" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see all outgoing messages. You should also click Show unencrypted messages and/or Show encrypted messages">
                    <td>Show outgoing messages?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.outbox" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Feedback info. Has messages been received. Click to see feedback info in sent/received messages and to see feedback status for messages">
                    <td>Show feedback info?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.feedback_info" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see unencrypted messages. You should also click Show ingoing messages and/or Show outgoing messages">
                    <td>Show unencrypted messages?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.unencrypted" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see encrypted messages. You should also click Show ingoing messages and/or Show outgoing messages">
                    <td>Show encrypted messages?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.encrypted" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see public chat messages">
                    <td>Show public chat messages?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.public_chat" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to see infinite-scroll process">
                    <td>Show infinite-scroll?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.infinite_scroll" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show data cleanup process for data.json file. Trying to keep data.json file small for fast communication">
                    <td>Show data.json cleanup?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.data_cleanup" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show invalid and/or missing avatars. Old not yet solved issue">
                    <td>Show invalid avatars?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.invalid_avatars" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show contact sort details">
                    <td>Show contacts sort?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.contact_order_by" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show chat message sort details">
                    <td>Show chat sort?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.chat_order_by" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information for chat message filter">
                    <td>Show chat filter?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.chat_filter" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show no public key warnings at startup (deleted contacts)">
                    <td>Show no pubkey warnings?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.no_pubkey" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information for edit alias process">
                    <td>Show edit alias?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.edit_alias" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information for chat message lost in cyberspace">
                    <td>Show lost messages?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.lost_message" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information about spam filter">
                    <td>Show spam filter?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.spam_filter" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to check sha256 addresses after every sitePublish call. Old maybe solved issue">
                    <td>Check sha256 addresses?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.check_sha256_addresses" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to disable autoexpanding textarea. Performance problem in firefox">
                    <td>Disable autoexpand textarea?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.disable_autoexpand_textarea" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information for contact action filter (buttons)">
                    <td>showContactAction filter?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.show_contact_action_filter" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information for emoji processing">
                    <td>Show emoji info?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.emoji" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show debug information for reaction processing">
                    <td>Show reaction info?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.reaction" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show ZeroNet site info after client log in">
                    <td>Show site info?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.site_info" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click to show MoneyNetworkAPI debug messages">
                    <td>MoneyNetworkAPI?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.money_network_api" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Click for delete content.file_optional before siteSign">
                    <td>ZeroNet issue #1147</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.debug.issue_1147" ng-change="u.debug_settings_changed()"></td>
                </tr>
                </tbody>
            </table>

            <span ng-show="u.setup.debug.enabled">
            <br>

            <table title="Use this section to enable/disable special test cases">
                <tbody>
                <tr>
                    <td>Show special test cases?</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.test.enabled" ng-change="u.debug_settings_changed()"></td>
                </tr>
                </tbody>
                <tbody ng-show="u.setup.test.enabled">
                <tr title="Testcase. Create a message lost in cyberspace. That is a message with status sent, no feedback and not in data.json fiĺe.">
                    <td>Message lost in cyberspace</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.test.force_lost_message" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Testcase. Fail image download. Simulate timeout when downloading an -image.json file">
                    <td>Simulate timeout for image download</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.test.image_timeout" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Testcase. Fail image download. Simulate file_done event after -image.json file download timeout">
                    <td>Simulate file_done even for image download</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.test.image_file_done" ng-change="u.debug_settings_changed()"></td>
                </tr>
                <tr title="Testcase. Do not compress images. Normally images are LZString compressed for smaller files and faster file sharing">
                    <td>Do not compress images</td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="checkbox" ng-model="u.setup.test.image_compress_disabled" ng-change="u.debug_settings_changed()"></td>
                </tr>
                </tbody>
            </table>

            </span>
            <br>

        </div>

        <!-- end user.html -->
    </script>

    <script type="text/ng-template" id="auth.html">

        <div class="bodyfull">

            <br>

            <table border="1" ng-show="a.z.site_info.cert_user_id">
                <tr>
                    <td>

                <span ng-hide="a.use_private_data && a.use_login.bol">
                    <input ng-hide="a.is_logged_in()" type="submit" value="Log in" id="test_log_in_1" ng-click="a.login_or_register()">
                    <input ng-show="a.is_logged_in()" type="submit" value="Log out" ng-click="a.logout()">
                </span>

                        <div ng-show="a.use_private_data && a.use_login.bol" style="width: 100%">
                            <input ng-show="a.is_logged_in()" type="submit" value="Log out" ng-click="a.logout()">

                            <form ng-hide="a.is_logged_in()" name="device_login_form" ng-submit="a.login_or_register()">
                                <table>
                                    <thead>
                                    <tr>
                                        <th></th>
                                        <th style="width:52px"></th>
                                        <th style="width:52px"></th>
                                        <th style="width:52px"></th>
                                        <th></th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    <tr>
                                        <td colspan="5" style="text-align: center">
                                            <span>Log in</span> <input type="radio" ng-model="a.register.yn" value="N">
                                            &nbsp;&nbsp;
                                            <span>Register</span> <input type="radio" ng-model="a.register.yn" value="Y"
                                                                         ng-change="a.set_keysize()"> &nbsp;&nbsp;
                                            <span>Guest</span> <input type="radio" ng-model="a.register.yn" value="G"
                                                                      ng-change="a.set_keysize()">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">&nbsp;</td>
                                    </tr>
                                    </tbody>
                                    <tbody ng-hide="a.register.yn == 'G'">
                                    <tr>
                                        <td>Password</td>
                                        <td colspan="3">
                                            <input id="auth_password" type="password" name="device_password"
                                                   ng-model="a.device_password"
                                                   required ng-minlength="10" placeholder="Enter password"
                                                   style="width: 120px">
                                        </td>
                                        <td><input ng-show="a.register.yn == 'N'" type="submit" value="Log in"
                                                   ng-hide="ctrl.register"
                                                   ng-disabled="a.login_disabled()">
                                        </td>
                                    </tr>
                                    <tr ng-show="device_login_form.device_password.$error.required">
                                        <td colspan="5">Password is a required field</td>
                                    </tr>
                                    <tr ng-show="device_login_form.device_password.$error.minlength">
                                        <td colspan="5">Minimum password length is 10</td>
                                    </tr>
                                    </tbody>

                                    <tbody ng-show="a.register.yn == 'Y'">
                                    <tr>
                                        <td>Confirm<br>password</td>
                                        <td colspan="3">
                                            <input type='password' name="confirm_device_password"
                                                   ng-model="a.confirm_device_password"
                                                   on-key-enter="a.login_or_register()" placeholder="Confirm password"
                                                   style="width: 120px">
                                        </td>
                                        <td><input ng-show="a.register.yn" type="submit" value="Register"
                                                   ng-disabled="a.register_disabled()">
                                        </td>
                                    </tr>
                                    <tr ng-show="a.confirm_device_password != a.device_password">
                                        <td colspan="5">Passwords do not match</td>
                                    </tr>
                                    </tbody>
                                    <tbody ng-show="a.register.yn == 'G'">
                                    <tr>
                                        <td colspan="5" style="text-align: center">
                                            <input type="button" value="Create" disabled title="Please uncheck saved encrypted in your browser (localStorage) and click Log in">
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </form>


            <span ng-hide="(a.register.yn != 'Y')"
                  title="Select encryption method for your ingoing messages. CryptMessage private key is saved in your user.json file on your computer (or proxy server). JSEncrypt private key is saved encrypted in your browser (localStorage). Recommend using 2048 bits keys (JSEncrypt). ">
                <span>Preferred public key encryption:</span>
            <table>
                <tbody>
                <tr>
                    <td>
                        <a href="https://zeronet.readthedocs.io/en/latest/site_development/zeroframe_api_reference/#plugin-cryptmessage"
                           target="_blank" rel="noopener noreferrer">CryptMessage</a> :
                    </td>
                    <td>
                        <input type="radio" ng-model="a.keysize" value="256">256 (BitCoin key)
                    </td>
                </tr>
                <tr>
                    <td><a href="https://github.com/travist/jsencrypt" target="_blank" rel="noopener noreferrer">JSEncrypt</a>
                        :
                    </td>
                    <td>
                        <input type="radio" ng-model="a.keysize" value="1024">1024
                        <input type="radio" ng-model="a.keysize" value="2048">2048
                        <input type="radio" ng-model="a.keysize" value="4096">4096
                        <input type="radio" ng-model="a.keysize" value="8192">8192
                    </td>
                </tr>
                </tbody>
            </table>
            <br>
            </span>


                        </div>


                    </td>
                </tr>
            </table>
            <br>


            <p ng-show="a.register.yn == 'Y'">
                Please choose a secure password (minimum 10 characters) and do <b style="font-size: 150%">NOT</b> forget or lose it.
                Remember your password. There is <b style="font-size: 150%">NO</b> help if you forget your password.
                Use "Register" after forgotten password to create a new empty account.
                Register takes a few seconds while generating private and public key for encrypted communication.
            </p>

            <p ng-show="a.z.site_info.cert_user_id && (a.register.yn == 'G') && a.use_login.bol">
                Guest log in. Please uncheck saved
                <span title="Uncheck 'encrypted' if you don't want password protection for this site. Not recommended but OK if you are the only one with access to this computer/browser">
                <input type="checkbox" ng-model="a.use_login.bol" ng-change="a.use_login_changed()"> encrypted in your browser (localStorage)"
                </span>
                and click Log in.
                Log in with blank password. You can use all functions in MoneyNetwork but your private data is browser (localStorage) is NOT password protected.
            </p>


            <p>
                ZeroNet ID
                <a href="" ng-bind="a.z.site_info.cert_user_id|shortCertId"
                   ng-click="a.select_zeronet_cert()"
                   title="{{a.z.site_info.cert_user_id}}">select ...
                </a>
                is used for communication with other ZeroNet users.
                Use an anonymous @moneynetwork.bit ZeroNet ID or use your preferred ZeroNet ID provider.
                Click on ZeroNet ID link to change ZeroNet certificate.
                Send me a <a href="/moneynetwork.bit/?path=/chat2/jro@zeroid.bit" target="_top" rel="noopener noreferrer">PM ✉</a>
                if your preferred ZeroNet ID povider is not on the list.
            </p>

            <p>
                <span ng-hide="a.z.site_info.cert_user_id">You cannot post data on ZeroNet and data are not saved in your browser. ZeroNet certificate is required for this.<br></span>
                <span ng-show="a.z.site_info.cert_user_id">
                <span title="Uncheck 'Private data' if you don't want any data saved in your browser. Everything except any ZeroNet posts are lost when you leave this site">
                    Private data <input type="checkbox" ng-model="a.use_private_data" ng-change="a.use_private_data_changed()"> are
                    <span ng-hide="a.use_private_data">not</span>
                    saved
                </span>
                <span title="Uncheck 'encrypted' if you don't want password protection for this site. Not recommended but OK if you are the only one with access to this computer/browser">
                    <span ng-show="a.use_private_data">
                        <input type="checkbox" ng-model="a.use_login.bol" id="test_use_login_checkbox" ng-change="a.use_login_changed()">
                        <span ng-hide="a.use_login.bol">un</span>encrypted
                    </span>
                    in your browser (localStorage).
                </span>
                <span ng-hide="a.use_private_data && a.use_login.bol">Recommend that you save private data encrypted in your browser.</span>

                </span>
            </p>
            <br>

            <p ng-include="'addHubs'"></p>


            <br><br><br>
            <p ng-hide="a.is_logged_in()" title="Click for full debug information in console">
                Debug?
                <input type="checkbox" ng-model="a.debug" ng-change="a.debug_changed()">
            </p>

        </div>

        <!-- end auth.html -->
    </script>

    <!-- end angularJS templates -->

</head>
<body ng-controller="NavCtrl as n">

<div class="navbar"> <!-- navbar navbar-default navbar-fixed-top  -->

    <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#/about">About</a>

            <div class="container-fluid nav-collapse">
                <table class="main-menu-1-line">
                    <tbody>
                    <tr>
                        <td>
                            <ul class="nav">
                                <li><a href="#/money">Money</a></li>
                                <li><a href="#/network">Network</a></li>
                                <li><a ng-href="{{n.chat_link()}}">
                                    Chat <span ng-bind-html="n.chat_notifications()|formatNotifications"></span>
                                </a></li>
                                <li><a href="#/wallet">Wallet</a></li>
                                <li><a href="#/user">Account</a></li>
                                <li>
                                    <a href="#/auth" ng-bind="n.z.site_info.cert_user_id|shortCertId" ng-click="n.select_zeronet_cert()"
                                       title="{{n.cert_title}}" ng-mouseover="n.update_cert_title()" ng-style="[n.z.site_info.cert_user_id,n.z_cache.user_id]|shortCertColor">select ...</a>
                                    <a href="" id="zeronet_cert_changed_link" ng-click="n.zeronet_cert_changed()" style="display: none"></a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <table class="main-menu-2-lines">
                    <tbody>
                    <tr>
                        <td>
                            <ul class="nav">
                                <li><a href="#/money">Money</a></li>
                                <li><a href="#/network">Network</a></li>
                                <li><a href="{{n.chat_link()}}">
                                    Chat <span ng-bind-html="n.chat_notifications()|formatNotifications"></span>
                                </a></li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <ul class="nav">
                                <li><a href="#/wallet">Wallet</a></li>
                                <li><a href="#/user">Account</a></li>
                                <li><a href="#/auth" ng-bind="n.z.site_info.cert_user_id|shortCertId" ng-click="n.select_zeronet_cert()" title="{{n.cert_title}}" ng-mouseover="n.update_cert_title()">select ...</a></li>
                            </ul>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
</div>

<div class="container-fluid" style="width: 100%">
    <div class="row-fluid">
        <div ng-view style="width: 100%" id="ng-view-id"></div>
    </div>
    <!--/row-->

</div>

<script type="text/javascript" src="js-api/MoneyNetworkAPI.js"></script>
<script type="text/javascript" src="js-external/10-jquery.js"></script>
<script type="text/javascript" src="js-external/15-bootstrap.js"></script>
<script type="text/javascript" src="js-external/20-bootstrap-collapse.js"></script>
<script type="text/javascript" src="js-external/25-bitcoinjs.js"></script>
<script type="text/javascript" src="js-external/28-Class.js"></script>
<script type="text/javascript" src="js-external/29-Uploadable.js"></script>
<script type="text/javascript" src="js-external/40-angular.js"></script>
<script type="text/javascript" src="js-external/41-angular-route.js"></script>
<script type="text/javascript" src="js-external/42-angular-sanitize.js"></script>
<script type="text/javascript" src="js-external/43-ng-infinite-scroll.js"></script>
<script type="text/javascript" src="js-external/50-CryptoJS-license.js"></script>
<script type="text/javascript" src="js-external/51-CryptoJS-core.js"></script>
<script type="text/javascript" src="js-external/52-CryptoJS-md5.js"></script>
<script type="text/javascript" src="js-external/53-CryptoJS-evpkdf.js"></script>
<script type="text/javascript" src="js-external/54-CryptoJS-enc-base64.js"></script>
<script type="text/javascript" src="js-external/55-CryptoJS-cipher-core.js"></script>
<script type="text/javascript" src="js-external/56-CryptoJS-aes.js"></script>
<script type="text/javascript" src="js-external/57-CryptoJS-sha256.js"></script>
<script type="text/javascript" src="js-external/60-jsencrypt.js"></script>
<script type="text/javascript" src="js-external/61-lz-string.js"></script>
<script type="text/javascript" src="js-external/62-tv4.js"></script>
<script type="text/javascript" src="js-external/63-Blob.js"></script>
<script type="text/javascript" src="js-external/64-FileSaver.js"></script>
<script type="text/javascript" src="js-external/65-markdown-it.js"></script>
<script type="text/javascript" src="js-external/65-markdown-it-v2.js"></script>
<script type="text/javascript" src="js-external/66-markdown-it-emoji.js"></script>
<script type="text/javascript" src="js-external/67-twemoji.js"></script>
<script type="text/javascript" src="js-external/68-ng-markdownit.js"></script>
<script type="text/javascript" src="js-external/30-ZeroFrame.js"></script>

<!--
  MoneyNetwork angularJS app - dynamic part - changed almost every day
  all.js ~= 1.3 Mb. js/all.js.zip ~= 200 Kb. Best to use .zip
 -->
<!--script type="text/javascript" src="js/all.js"></script>
<!-- -->
<script type="text/javascript" src="js/all.js.zip/all.js"></script>
<!-- -->

<!-- end - some more static js files -->
<script type="text/javascript" src="js-external/90-ui-bootstrap-tpls-2.1.3.js"></script>
<script type="text/javascript" src="js-external/91-emoji-info.js"></script>
<script type="text/javascript" src="js-external/92-ngDialog.js"></script>

</body>
</html>
